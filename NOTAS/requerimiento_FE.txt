# REQUERIMIENTO FRONTEND ‚Äî FINHUB (Frontend + Integraci√≥n Backend)
**Stack objetivo:** HTML5 + CSS + JavaScript (ES Modules).  
**Objetivo:** Implementar UI web que consuma la API `/api` del backend FinHub (PHP 8.2), incluyendo login como landing y navegaci√≥n post-login con control de sesi√≥n por token.

---

## 0) Frameworks y librer√≠as permitidas (restricci√≥n expl√≠cita)

### front-req-000: Frameworks permitidos (lista cerrada)
El frontend **solo puede utilizar** los siguientes frameworks/librer√≠as.  
Cualquier otra tecnolog√≠a queda **prohibida** salvo autorizaci√≥n expl√≠cita.

**Permitidos:**
- **Bootstrap 5.x** (solo CSS o CSS+JS) v√≠a CDN.
- **Tailwind CSS** v√≠a CDN (modo utility-first, sin build step).
- **Font Awesome** v√≠a CDN (para √≠conos; opcional).
- **jQuery 3.x+** √∫nicamente para manipulaciones DOM puntuales, eventos simples y llamadas AJAX b√°sicas; no se permiten plugins pesados, UI kits o arquitecturas basadas en `$(document).ready()`.

**Opcionales (pueden combinarse si tiene sentido y reduce ruido):**
- Bootstrap **y/o** Tailwind (permitida la combinaci√≥n siempre que se justifique la coherencia visual).

**Nota adicional:** el c√≥digo nuevo debe priorizar JS moderno (ES Modules, funciones puras, manejo expl√≠cito de estado); jQuery se introduce s√≥lo si reduce ruido o mejora compatibilidad puntual, y nunca reemplaza la l√≥gica de negocio del frontend.

**Prohibidos expl√≠citamente:**
- React, Vue, Angular, Svelte.
- Next.js, Nuxt, Astro.
- Vite, Webpack, Parcel, Rollup.
- TypeScript.
- Vanilla JavaScript (sin m√≥dulos ni patrones estructurados).
- Cualquier framework SPA pesado o con build pipeline.

**Justificaci√≥n t√©cnica:**
- Mantener coherencia con backend PHP simple.
- Evitar tooling adicional, build steps y dependencias innecesarias.
- Facilitar mantenimiento y lectura por OpenAI Codex y humanos.

---

## 1) Convenciones generales

### front-req-001: Alcance
El frontend debe proveer:
- Landing/Login (pantalla principal).
- Flujo de autenticaci√≥n con token Bearer.
- Base para vistas autenticadas (layout com√∫n) y control de acceso por rol.

### front-req-002: Relaci√≥n con backend
El frontend se relaciona con el backend usando los endpoints y contratos definidos en:
- **Identity**: `req-101` (auth y usuarios), `req-030` (Bearer token), `req-031` (roles).
- **Convenciones API**: `req-020..024` (JSON, versionado, paginaci√≥n).
- **Errores**: `req-700` (estructura de errores).

### front-req-003: Versionado y base URL
- Toda llamada debe apuntar a `/api/...` (alineado con `req-021`).
- La base URL del backend debe ser configurable (ej: `config.js`). Prohibido hardcodear.

### front-req-004: Autenticaci√≥n
- Guardar el token en `localStorage` (o `sessionStorage` si se define).
- Enviar siempre:
  - `Authorization: Bearer <token>` (backend `req-030`).
- Ante 401, limpiar token y redirigir a `/login`.

---

## 2) Assets y branding

### front-req-010: Logo obligatorio
- Integrar el logo `full_logoweb.png` en la carpeta `logo/`.
- Visible en la landing/login.

### front-req-011: Favicon obligatorio
- Cada vista debe integrar `favicon.png`.
- Definido en el HTML base para toda navegaci√≥n.

### front-req-012: Frase de marketing
- La pantalla de login debe funcionar como landing.
- Incluir una **frase de marketing atractiva** claramente visible.

---

## 3) Pantalla Landing/Login

### front-req-100: Ruta y composici√≥n
- Ruta: `/login` (o `/` redirigiendo a `/login` si no hay sesi√≥n).
- Componentes m√≠nimos:
  - Logo (`front-req-010`)
  - Frase de marketing (`front-req-012`)
  - Formulario de login
  - Mensajes de error del backend
  - Bot√≥n ‚ÄúIngresar‚Äù

### front-req-101: Campos del formulario
- Email:
  - `type="email"`, requerido.
- Password:
  - `type="password"`, requerido.
  - Toggle de visibilidad (ver `front-req-102`).

### front-req-102: Mostrar/ocultar password con emoji
- El input de password debe incluir un **emoji clickeable** (ej: üëÅÔ∏è / üôà).
- Al click:
  - Alternar `type="password"` ‚Üî `type="text"`.
  - Cambiar el emoji o su estado visual.
- Accesibilidad:
  - Usar `button` con `aria-label`.

### front-req-103: Env√≠o y validaci√≥n
- Validaci√≥n m√≠nima en cliente:
  - Email v√°lido.
  - Password no vac√≠o.
- Request:
  - **POST** `/api/auth/login` (backend `req-101`)
  - Body JSON `{ "email": "...", "password": "..." }`
  - Header `Content-Type: application/json`.

### front-req-104: Manejo de respuesta
- OK:
  - Persistir token.
  - Redirigir a `/app` o `/dashboard`.
- Error:
  - Mostrar `error.message` del backend (`req-700`).
  - No mostrar detalles t√©cnicos.

### front-req-105: Landing extendido con experiencia inmersiva
- El login funciona como landing y comparte espacio con logo, frase de marketing y peque√±as descripciones del servicio.
- La vista completa debe tener un degradado diagonal que comienza claro en la esquina superior izquierda, oscurece hasta la mitad de la pantalla y vuelve a aclarar la esquina inferior derecha.
- Integrar una frase de marketing atractiva y una breve descripci√≥n del servicio (p.ej. ‚ÄúConecta tus portafolios con inteligencia de mercado, precios autom√°ticos y trazabilidad completa‚Äù) en la secci√≥n hero junto al logo.
- El panel de login debe presentar una animaci√≥n de deslizamiento (slide-in) desde abajo y fundirse en el contenido al cargarse la p√°gina, manteniendo la interacci√≥n accesible (m√°scara de colores y contraste alto).
- El formulario de login debe tener todos los inputs (usuario y contrase√±a) con el mismo ancho, centrados, manteniendo simetr√≠a en la distancia a los m√°rgenes y compartiendo el mismo ancho que el bot√≥n ‚ÄúIngresar‚Äù; el bot√≥n de revelar contrase√±a se ubica del lado izquierdo y centrado verticalmente para facilitar el alcance.
- Se requiere un checkbox ‚ÄúRecordar usuario‚Äù y un enlace ‚ÄúRegistrar nuevo usuario‚Äù dentro del panel del formulario que complementen el flujo de acceso.

### front-req-106: Dashboard integrado con toolbar
- La p√°gina `/Frontend/Dashboard.html` debe mostrar un dashboard autenticado con una toolbar superior como men√∫ principal.
- En la esquina izquierda de la toolbar va solo el logo del sistema; del lado derecho un bot√≥n con el nombre/rol del usuario que abre un men√∫ desplegable con las opciones ‚ÄúABM de clientes‚Äù y ‚ÄúCerrar sesi√≥n‚Äù.
- ‚ÄúABM de clientes‚Äù presenta una vista dentro del dashboard que explica las acciones de administraci√≥n de clientes; ‚ÄúCerrar sesi√≥n‚Äù llama a `/api/auth/logout`, limpia el token y redirige al login.
- La toolbar incluye botones de navegaci√≥n r√°pida (Resumen, Portafolios, Precios) que vuelven al contenido principal.
- El √°rea principal se organiza en tarjetas con perfil, portafolios resumidos y √∫ltima cotizaci√≥n, manteniendo esp√≠ritu de branding azul oscuro y bordes suaves.

---

## 4) Vistas autenticadas

### front-req-200: Layout autenticado com√∫n
- Header con logo y acci√≥n ‚ÄúSalir‚Äù.
- Favicon activo.
- Contenedor principal.
- Manejo global de errores.

### front-req-201: Perfil de usuario
- Al cargar `/app`:
  - **GET** `/api/me` (backend `req-101`).
- Si 401:
  - Logout forzado y redirect a login.
- Leer rol (`admin` / `user`) para habilitar UI (backend `req-031`).

### front-req-202: Logout
- Acci√≥n ‚ÄúSalir‚Äù:
  - **POST** `/api/auth/logout` (si aplica).
- Siempre:
  - Borrar token.
  - Redirigir a `/login`.

---

## 5) Cliente HTTP y errores

### front-req-300: Cliente HTTP centralizado
Implementar `apiClient.js` que:
- Use `fetch`.
- Inyecte `Authorization` autom√°ticamente.
- Parsee JSON.
- Normalice errores.

### front-req-301: Manejo de errores
- `400`: validaci√≥n.
- `401`: sesi√≥n inv√°lida ‚Üí logout.
- `403`: acceso denegado.
- `404`: no encontrado.
- `500`: error gen√©rico (usar `trace_id` solo para soporte).

---

## 6) Estructura m√≠nima

### front-req-900: Estructura recomendada
- `public/`
  - `index.html`
  - `favicon.png`
  - `logo/full_logoweb.png`
- `Frontend/`
  - `pages/login.js`
  - `pages/Dashboard.js`
  - `components/passwordToggle.js`
  - `apicliente.js`
  - `auth/authStore.js`

### front-req-901: Restricci√≥n de configuraci√≥n
- Prohibido hardcodear:
  - URL de API
  - Tokens
  - Or√≠genes
- Todo configurable v√≠a archivo JS de config.

---

## 7) Trazabilidad Backend ‚Üî Frontend

- Login UI ‚Üí **POST** `/api/auth/login` ‚Üí backend `req-101`
- Token ‚Üí `Authorization: Bearer` ‚Üí backend `req-030`
- Perfil ‚Üí **GET** `/api/me` ‚Üí backend `req-101`
- Roles UI ‚Üí backend `req-031`
- Errores ‚Üí backend `req-700`
- Versionado ‚Üí backend `req-021`
