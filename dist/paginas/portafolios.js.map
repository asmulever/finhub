{
  "version": 3,
  "sources": ["../../Frontend/auth/authStore.js", "../../Frontend/apicliente.js", "../../Frontend/components/toolbar.js", "../../Frontend/components/loadingOverlay.js", "../../Frontend/paginas/portafolios.js"],
  "sourcesContent": ["const TOKEN_KEY = 'finhub_token';\nconst TOKEN_EXP_KEY = 'finhub_token_exp';\nconst PROFILE_KEY = 'finhub_profile';\nconst storage = sessionStorage;\n\nconst nowSeconds = () => Math.floor(Date.now() / 1000);\n\nexport const authStore = {\n  getToken() {\n    const exp = Number(storage.getItem(TOKEN_EXP_KEY) || 0);\n    if (exp && nowSeconds() >= exp) {\n      this.clearToken();\n      return null;\n    }\n    return storage.getItem(TOKEN_KEY);\n  },\n  setToken(token, expiresInSeconds = 3600) {\n    storage.setItem(TOKEN_KEY, token);\n    storage.setItem(TOKEN_EXP_KEY, String(nowSeconds() + expiresInSeconds));\n  },\n  clearToken() {\n    storage.removeItem(TOKEN_KEY);\n    storage.removeItem(TOKEN_EXP_KEY);\n    storage.removeItem(PROFILE_KEY);\n  },\n  setProfile(profile) {\n    storage.setItem(PROFILE_KEY, JSON.stringify(profile));\n  },\n  getProfile() {\n    const value = storage.getItem(PROFILE_KEY);\n    return value ? JSON.parse(value) : null;\n  },\n};\n", "import { authStore } from './auth/authStore.js';\n\n/** Devuelve en tiempo de ejecuci\u00F3n la URL base que indica el entorno sin ning\u00FAn hardcode. */\nexport const getBaseUrl = (() => {\n  let cached = '';\n  return () => {\n    if (cached !== '') {\n      return cached;\n    }\n    const envBase = window.__ENV?.API_BASE_URL;\n    if (!envBase) {\n      throw new Error('API_BASE_URL no est\u00E1 configurada en window.__ENV');\n    }\n    cached = envBase.endsWith('/') ? envBase.slice(0, -1) : envBase;\n    return cached;\n  };\n})();\n\n/** Construye la URL final agregando la base configurada si la ruta es relativa. */\nconst buildUrl = (path) => (path.startsWith('http') ? path : `${getBaseUrl()}${path}`);\n\n/** Borra el token y redirige al login (forzando la ventana top) si el backend responde con 401. */\nconst handleUnauthorized = () => {\n  authStore.clearToken();\n  const target = '/';\n  if (window.top && window.top !== window) {\n    window.top.location.href = target;\n  } else {\n    window.location.href = target;\n  }\n};\n\n/** Fusiona headers adicionales con el header JSON obligatorio. */\nconst buildHeaders = (extraHeaders) => ({\n  'Content-Type': 'application/json',\n  ...extraHeaders,\n});\n\n/** Extrae el payload JSON o devuelve null si no viene contenido v\u00E1lido. */\nconst parsePayload = async (response) => response.json().catch(() => null);\n\n/**\n * Env\u00EDa una petici\u00F3n HTTP contra la API, gestionando tokens, errores y JSON.\n * @param path Ruta relativa o absoluta del recurso.\n * @param options Configuraci\u00F3n adicional de fetch.\n */\nexport const apiClient = async (path, options = {}) => {\n  const { method = 'GET', body, headers = {}, ...rest } = options;\n  const composedHeaders = buildHeaders(headers);\n  const token = authStore.getToken() ?? localStorage.getItem(\"jwt\");\n\n  if (token) {\n    composedHeaders.Authorization = `Bearer ${token}`;\n  }\n  \n  const response = await fetch(buildUrl(path), {\n    method,\n    credentials: 'include',\n    headers: composedHeaders,\n    body: body === undefined ? undefined : JSON.stringify(body),\n    ...rest,\n  });\n\n  const payload = await parsePayload(response);\n  if (!response.ok) {\n    if (response.status === 401) {\n      handleUnauthorized();\n    }\n    const err = payload?.error ?? {\n      code: `http.${response.status}`,\n      message: response.statusText,\n    };\n    throw { status: response.status, error: err };\n  }\n\n  return payload;\n};\n\n/** Genera un helper para m\u00E9todos que env\u00EDan body JSON. */\nconst withBody = (method) => (path, body) => apiClient(path, { method, body });\n\n/** Genera un helper para m\u00E9todos sin body. */\nconst withoutBody = (method) => (path) => apiClient(path, { method });\n\n/** Env\u00EDa un POST con body serializado. */\nexport const postJson = withBody('POST');\n\n/** Env\u00EDa un PATCH con body serializado. */\nexport const patchJson = withBody('PATCH');\n\n/** Ejecuta una petici\u00F3n DELETE sin body. */\nexport const deleteJson = withoutBody('DELETE');\n\n/** Ejecuta una petici\u00F3n GET sin body. */\nexport const getJson = withoutBody('GET');\n", "import { authStore } from '../auth/authStore.js';\n\nconst toolbarTemplate = `\n  <header class=\"toolbar\">\n    <div class=\"toolbar-logo\">\n      <a href=\"/Frontend/app.php\">\n        <img src=\"/logo/full_logoweb.png\" alt=\"FinHub\" style=\"height: 88px;\" />\n      </a>\n    </div>\n  <nav class=\"toolbar-menu\">\n      <button type=\"button\" class=\"icon-btn\" data-menu=\"portfolios\" data-link=\"/Frontend/Portafolios.html\" aria-label=\"Portafolios\">\n        <span class=\"circle-icon\">\uD83D\uDC5C</span>\n      </button>\n      <button type=\"button\" class=\"icon-btn\" data-menu=\"heatmap\" data-link=\"/Frontend/heatmap.html\" aria-label=\"Heatmap\">\n        <span class=\"circle-icon\">\uD83C\uDF21\uFE0F</span>\n      </button>\n      <button type=\"button\" class=\"icon-btn\" id=\"stats-menu\" data-menu=\"stats\" data-link=\"/Frontend/estadistica.html\" aria-label=\"Estad\u00EDstica\">\n        <span class=\"circle-icon\">\uD83D\uDCCA</span>\n      </button>\n      <button type=\"button\" class=\"icon-btn\" id=\"signals-menu\" data-menu=\"signals\" data-link=\"/Frontend/trader-consejero.html\" aria-label=\"Trader Consejero\">\n        <span class=\"circle-icon\">\uD83D\uDCB9</span>\n      </button>\n      <button type=\"button\" class=\"icon-btn\" id=\"oracle-menu\" data-menu=\"oracle\" data-link=\"/Frontend/oraculo.html\" aria-label=\"Or\u00E1culo\">\n        <span class=\"circle-icon\">\uD83D\uDD2E</span>\n      </button>\n      <button type=\"button\" class=\"icon-btn\" id=\"radar-menu\" data-menu=\"radar\" data-link=\"/Frontend/radar.html\" aria-label=\"Radar\">\n        <span class=\"circle-icon\">\uD83D\uDCE1</span>\n      </button>\n    </nav>\n    <div class=\"toolbar-user\">\n      <button id=\"user-menu-button\" type=\"button\">\n        <span id=\"user-name\">Usuario</span>\n        <span class=\"chevron\">\u25BE</span>\n      </button>\n    </div>\n    <button class=\"toolbar-toggle\" type=\"button\" aria-expanded=\"true\" aria-label=\"Ocultar barra\" title=\"Ocultar barra\">\u25B2</button>\n  </header>\n  <div class=\"user-dropdown\" id=\"user-dropdown\">\n    <button id=\"admin-users-action\" type=\"button\">Admin Usuarios</button>\n    <button id=\"logout-action\" type=\"button\">Cerrar sesi\u00F3n</button>\n  </div>\n`;\n\nlet toolbarMounted = false;\nconst isAdminProfile = (profile) => String(profile?.role ?? '').toLowerCase() === 'admin';\n\nconst ensureToolbarStyles = () => {\n  if (document.getElementById('toolbar-collapsible-style')) return;\n  const style = document.createElement('style');\n  style.id = 'toolbar-collapsible-style';\n  style.textContent = `\n    #toolbar-root > header.toolbar {\n      padding: 10px 56px 10px 12px;\n      gap: 10px;\n    }\n    .toolbar.has-toggle { position: sticky; top: 0; z-index: 15; padding-bottom: 28px; position: relative; }\n    .toolbar-toggle {\n      position: absolute;\n      right: 12px;\n      bottom: 6px;\n      width: 36px;\n      height: 36px;\n      border-radius: 999px;\n      border: 1px solid rgba(148, 163, 184, 0.45);\n      background: rgba(15, 23, 42, 0.85);\n      color: #e2e8f0;\n      cursor: pointer;\n      display: grid;\n      place-items: center;\n      box-shadow: 0 10px 30px rgba(0,0,0,0.35);\n    }\n    /* Cuando la barra est\u00E1 colapsada, dejamos el bot\u00F3n sobresalir >50% hacia abajo */\n    .toolbar.collapsed .toolbar-toggle {\n      bottom: -20px;\n    }\n    .toolbar-toggle:focus-visible { outline: 2px solid rgba(14, 165, 233, 0.6); outline-offset: 2px; }\n    .toolbar.collapsed .toolbar-menu,\n    .toolbar.collapsed .toolbar-user,\n    .toolbar.collapsed .toolbar-logo { display: none !important; }\n    .toolbar.collapsed { padding-bottom: 16px; }\n    .toolbar-logo img { border: none; outline: none; box-shadow: none; margin: 0; padding: 0; height: 72px; }\n    .toolbar-menu .icon-btn {\n      width: 40px;\n      height: 40px;\n      border-radius: 50%;\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      padding: 0;\n      border: none;\n      box-shadow: none;\n      background: rgba(15, 23, 42, 0.9);\n    }\n    .circle-icon { font-size: 1.1rem; line-height: 1; }\n    .toolbar-menu button,\n    .toolbar-menu select {\n      margin: 0;\n      border: none;\n      box-shadow: none;\n    }\n    @media (max-width: 768px) {\n      .toolbar {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        grid-auto-rows: auto;\n        align-items: center;\n        gap: 6px 10px;\n        padding: 8px 56px 28px 12px;\n      }\n      .toolbar-logo {\n        grid-column: 1 / 2;\n        grid-row: 1;\n        display: flex;\n        align-items: center;\n        margin: 0;\n      }\n      .toolbar-user {\n        grid-column: 2 / 3;\n        grid-row: 1;\n        display: flex;\n        justify-content: flex-end;\n        align-items: center;\n        min-width: 0;\n        margin: 0;\n      }\n      .toolbar-menu {\n        grid-column: 1 / 3;\n        grid-row: 2;\n        width: 100%;\n        display: flex;\n        flex-wrap: wrap;\n        gap: 6px;\n        justify-content: flex-start;\n        margin-top: 4px;\n      }\n      .toolbar-menu button,\n      .toolbar-menu select {\n        padding: 8px 10px;\n        min-width: auto;\n        margin: 0;\n        border: none;\n        box-shadow: none;\n      }\n    }\n  `;\n  document.head.appendChild(style);\n};\n\nexport const setAdminMenuVisibility = (profile) => {\n  const adminButton = document.getElementById('admin-users-action');\n  const signalsButton = document.getElementById('signals-menu');\n  const isAdmin = isAdminProfile(profile);\n  if (adminButton) adminButton.hidden = !isAdmin;\n  if (signalsButton) signalsButton.hidden = false;\n};\n\nexport const renderToolbar = () => {\n  const container = document.getElementById('toolbar-root');\n  if (!container || toolbarMounted) {\n    return;\n  }\n  ensureToolbarStyles();\n  container.innerHTML = toolbarTemplate;\n  toolbarMounted = true;\n  const cachedProfile = authStore.getProfile();\n  setAdminMenuVisibility(cachedProfile);\n};\n\nexport const highlightToolbar = () => {\n  const path = window.location.pathname;\n  document.querySelectorAll('.toolbar-menu button').forEach((button) => {\n    const link = button.getAttribute('data-link');\n    button.classList.toggle('active', link === path);\n  });\n};\n\nconst updateToggleVisual = (toolbar, toggle) => {\n  const collapsed = toolbar.classList.contains('collapsed');\n  toggle.textContent = collapsed ? '\u25BC' : '\u25B2';\n  toggle.setAttribute('aria-expanded', String(!collapsed));\n  toggle.setAttribute('aria-label', collapsed ? 'Mostrar barra' : 'Ocultar barra');\n  toggle.title = collapsed ? 'Mostrar barra' : 'Ocultar barra';\n};\n\nexport const collapseToolbar = () => {\n  const toolbar = document.querySelector('.toolbar');\n  if (!toolbar) return;\n  toolbar.classList.add('collapsed');\n  const toggle = document.querySelector('.toolbar-toggle');\n  if (toggle) {\n    updateToggleVisual(toolbar, toggle);\n  }\n};\n\nconst bindToolbarToggle = () => {\n  const toolbar = document.querySelector('.toolbar');\n  const toggle = document.querySelector('.toolbar-toggle');\n  if (!toolbar || !toggle) return;\n  toolbar.classList.add('has-toggle');\n  updateToggleVisual(toolbar, toggle);\n  toggle.addEventListener('click', () => {\n    toolbar.classList.toggle('collapsed');\n    updateToggleVisual(toolbar, toggle);\n  });\n};\n\nexport const bindToolbarNavigation = () => {\n  const frame = document.getElementById('app-frame');\n  document.querySelectorAll('.toolbar-menu button').forEach((button) => {\n    button.addEventListener('click', (event) => {\n      const link = button.getAttribute('data-link');\n      if (!link) return;\n      if (frame) {\n        event.preventDefault();\n        if (frame.src !== link) {\n          frame.src = link;\n        }\n        document.querySelectorAll('.toolbar-menu button').forEach((b) => b.classList.remove('active'));\n        button.classList.add('active');\n        return;\n      }\n      event.preventDefault();\n      window.location.href = link;\n    });\n  });\n  bindToolbarToggle();\n};\n\nexport const setToolbarUserName = (name) => {\n  const label = document.getElementById('user-name');\n  if (!label) return;\n  label.textContent = name && name.length ? name : 'Usuario';\n};\n\nexport const bindUserMenu = ({ onLogout, onAdmin, profile } = {}) => {\n  const menuButton = document.getElementById('user-menu-button');\n  const dropdown = document.getElementById('user-dropdown');\n  if (!menuButton || !dropdown) return;\n  setAdminMenuVisibility(profile ?? authStore.getProfile());\n\n  menuButton.addEventListener('click', () => {\n    dropdown.classList.toggle('visible');\n  });\n\n  document.addEventListener('click', (event) => {\n    if (!menuButton.contains(event.target) && !dropdown.contains(event.target)) {\n      dropdown.classList.remove('visible');\n    }\n  });\n\n  const adminButton = document.getElementById('admin-users-action');\n  const logoutButton = document.getElementById('logout-action');\n  adminButton?.addEventListener('click', (event) => {\n    event.preventDefault();\n    dropdown.classList.remove('visible');\n    if (typeof onAdmin === 'function') {\n      onAdmin();\n    }\n  });\n  logoutButton?.addEventListener('click', (event) => {\n    event.preventDefault();\n    dropdown.classList.remove('visible');\n    if (typeof onLogout === 'function') {\n      onLogout();\n    }\n  });\n};\n", "const STYLE_ID = 'app-loading-overlay-style';\n\nconst injectStyles = () => {\n  if (document.getElementById(STYLE_ID)) return;\n  const style = document.createElement('style');\n  style.id = STYLE_ID;\n  style.textContent = `\n    .app-loading-overlay {\n      position: fixed;\n      inset: 0;\n      background: rgba(3, 7, 18, 0.78);\n      backdrop-filter: blur(2px);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 9999;\n      opacity: 0;\n      pointer-events: none;\n      transition: opacity 0.18s ease;\n    }\n    .app-loading-overlay.visible {\n      opacity: 1;\n      pointer-events: all;\n    }\n    .app-loading-spinner {\n      width: 70px;\n      height: 70px;\n      border-radius: 50%;\n      border: 6px solid rgba(148, 163, 184, 0.35);\n      border-top-color: #22d3ee;\n      animation: app-spin 0.9s linear infinite;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);\n    }\n    @keyframes app-spin {\n      to { transform: rotate(360deg); }\n    }\n  `;\n  document.head.appendChild(style);\n};\n\n/** Crea un overlay reutilizable con spinner centrado. */\nexport const createLoadingOverlay = () => {\n  injectStyles();\n  const overlay = document.createElement('div');\n  overlay.className = 'app-loading-overlay';\n\n  const spinner = document.createElement('div');\n  spinner.className = 'app-loading-spinner';\n  overlay.appendChild(spinner);\n\n  const state = { counter: 0 };\n\n  const show = () => {\n    try {\n      state.counter += 1;\n      if (!overlay.isConnected) {\n        document.body.appendChild(overlay);\n      }\n      overlay.classList.add('visible');\n    } catch (error) {\n      console.info('[loadingOverlay] No se pudo mostrar overlay', error);\n    }\n  };\n\n  const hide = () => {\n    try {\n      state.counter = Math.max(0, state.counter - 1);\n      if (state.counter === 0) {\n        overlay.classList.remove('visible');\n      }\n    } catch (error) {\n      console.info('[loadingOverlay] No se pudo ocultar overlay', error);\n    }\n  };\n\n  const withLoader = async (fn) => {\n    show();\n    try {\n      return await fn();\n    } catch (error) {\n      console.info('[loadingOverlay] Error durante operaci\u00F3n envuelta', error);\n      throw error;\n    } finally {\n      hide();\n    }\n  };\n\n  return { show, hide, withLoader };\n};\n", "import { getJson, postJson, deleteJson } from '../apicliente.js';\nimport { authStore } from '../auth/authStore.js';\nimport { bindToolbarNavigation, bindUserMenu, highlightToolbar, renderToolbar, setAdminMenuVisibility, setToolbarUserName } from '../components/toolbar.js';\nimport { createLoadingOverlay } from '../components/loadingOverlay.js';\n\nconst overlay = createLoadingOverlay();\nconst state = {\n  profile: null,\n  catalog: [],\n  portfolio: [],\n  filtered: [],\n  counts: {\n    portfolio: 0,\n    acciones_argentinas: 0,\n    cedears: 0,\n    bonos: 0,\n    mercados_globales: 0,\n  },\n};\n\nconst setError = (msg) => {\n  const el = document.getElementById('portfolio-error');\n  if (el) el.textContent = msg || '';\n};\n\nconst formatPrice = (value) => {\n  if (value === null || value === undefined || value === '') return '\u2014';\n  const num = Number(value);\n  if (Number.isNaN(num)) return String(value);\n  return num.toLocaleString('es-AR', { maximumFractionDigits: 4 });\n};\n\nconst ensureAuthenticated = () => {\n  const token = authStore.getToken() ?? localStorage.getItem('jwt');\n  if (!token) {\n    const target = '/';\n    if (window.top && window.top !== window) {\n      window.top.location.href = target;\n    } else {\n      window.location.href = target;\n    }\n  }\n};\n\nconst CATEGORY_LABELS = {\n  acciones_argentinas: 'Acciones Argentinas',\n  cedears: 'CEDEARs',\n  bonos: 'Bonos',\n  mercados_globales: 'Mercados Globales',\n};\n\nconst CATEGORY_TYPES = {\n  acciones_argentinas: 'ACCION_AR',\n  cedears: 'CEDEAR',\n  bonos: 'BONO',\n  mercados_globales: 'MERCADOS_GLOBALES',\n};\n\nconst normalizeCatalogItem = (row) => {\n  const especie = String(row.especie ?? row.ticker ?? row.symbol ?? '').toUpperCase();\n  if (!especie) return null;\n  const symbol = String(row.symbol ?? '').toUpperCase();\n  const category = String(row.category ?? '').trim();\n  if (!category) return null;\n  return {\n    especie,\n    symbol,\n    name: row.nombre ?? row.name ?? especie,\n    category,\n    panel: row.panel ?? '',\n    segment: row.segment ?? '',\n    ultimo: row.ultimo ?? null,\n    mercado: row.mercado ?? '',\n  };\n};\n\nconst normalizePortfolioItem = (row) => {\n  const especie = String(row.especie ?? row.symbol ?? '').toUpperCase();\n  if (!especie) return null;\n  const symbol = String(row.symbol ?? '').toUpperCase();\n  return {\n    especie,\n    symbol,\n    name: row.name ?? row.nombre ?? especie,\n    category: row.type ?? row.tipo ?? '',\n    panel: row.exchange ?? row.mercado ?? '',\n  };\n};\n\nconst rebuildCounts = () => {\n  const counts = {\n    portfolio: state.portfolio.length,\n    acciones_argentinas: 0,\n    cedears: 0,\n    bonos: 0,\n    mercados_globales: 0,\n  };\n  state.catalog.forEach((item) => {\n    if (!item?.category) return;\n    const key = item.category;\n    if (key === 'acciones_argentinas') counts.acciones_argentinas += 1;\n    if (key === 'cedears') counts.cedears += 1;\n    if (key === 'bonos') counts.bonos += 1;\n    if (key === 'mercados_globales') counts.mercados_globales += 1;\n  });\n  state.counts = counts;\n  const setBadge = (id, value) => {\n    const el = document.getElementById(id);\n    if (el) el.textContent = value;\n  };\n  setBadge('badge-portfolio', `En cartera: ${counts.portfolio}`);\n  setBadge('badge-acciones', `Acciones AR: ${counts.acciones_argentinas}`);\n  setBadge('badge-cedears', `CEDEARs: ${counts.cedears}`);\n  setBadge('badge-bonos', `Bonos: ${counts.bonos}`);\n  setBadge('badge-globales', `Mercados Globales: ${counts.mercados_globales}`);\n};\n\nconst loadPortfolio = async () => {\n  setError('');\n  try {\n    const resp = await getJson('/portfolio/instruments');\n    const items = Array.isArray(resp?.data) ? resp.data : [];\n    state.portfolio = items.map(normalizePortfolioItem).filter(Boolean);\n  } catch (error) {\n    state.portfolio = [];\n    setError(error?.error?.message ?? 'No se pudo cargar tu portafolio');\n  }\n};\n\nconst loadCatalog = async () => {\n  setError('');\n  try {\n    const resp = await getJson('/rava/catalog');\n    const items = Array.isArray(resp?.data) ? resp.data : [];\n    state.catalog = items.map(normalizeCatalogItem).filter(Boolean);\n  } catch (error) {\n    state.catalog = [];\n    setError(error?.error?.message ?? 'No se pudo cargar el cat\u00E1logo de Rava');\n  }\n};\n\nconst applyFilter = () => {\n  const category = document.getElementById('ticker-category')?.value || 'all';\n  const search = (document.getElementById('ticker-search')?.value || '').toLowerCase();\n  const portfolioSet = new Set(state.portfolio.map((p) => p.especie));\n  const source = category === 'selected' ? state.portfolio : state.catalog;\n  state.filtered = source.filter((item) => {\n    if (!item) return false;\n    const matchesSearch = search === ''\n      || item.especie.toLowerCase().includes(search)\n      || (item.symbol && item.symbol.toLowerCase().includes(search))\n      || String(item.name ?? '').toLowerCase().includes(search);\n    if (!matchesSearch) return false;\n    if (category === 'selected') return true;\n    if (category === 'all') return true;\n    if (category === 'acciones_argentinas' && item.category === 'acciones_argentinas') return true;\n    if (category === 'cedears' && item.category === 'cedears') return true;\n    if (category === 'bonos' && item.category === 'bonos') return true;\n    if (category === 'mercados_globales' && item.category === 'mercados_globales') return true;\n    return false;\n  }).map((item) => ({\n    ...item,\n    inPortfolio: portfolioSet.has(item.especie),\n  }));\n  renderList();\n};\n\nconst renderList = () => {\n  const body = document.getElementById('ticker-list');\n  if (!body) return;\n  if (state.filtered.length === 0) {\n    body.innerHTML = '<tr><td class=\"muted\" colspan=\"6\">Sin resultados</td></tr>';\n    return;\n  }\n  const category = document.getElementById('ticker-category')?.value || 'all';\n  body.innerHTML = state.filtered.map((item) => {\n    const isSelected = category === 'selected' || item.inPortfolio;\n    const actionLabel = isSelected ? 'Quitar' : 'Agregar';\n    const actionClass = isSelected ? 'btn-warn' : 'btn-secondary';\n    const categoryLabel = CATEGORY_LABELS[item.category] ?? item.category ?? '\u2014';\n    const displaySymbol = item.symbol || item.especie;\n    return `\n      <tr data-especie=\"${item.especie}\">\n        <td><strong>${displaySymbol}</strong></td>\n        <td>${item.name ?? '\u2014'}</td>\n        <td>${formatPrice(item.ultimo)}</td>\n        <td>${categoryLabel}</td>\n        <td>${item.panel || item.segment || '\u2014'}</td>\n        <td><button type=\"button\" class=\"${actionClass}\" data-action=\"${isSelected ? 'remove' : 'add'}\" data-especie=\"${item.especie}\">${actionLabel}</button></td>\n      </tr>\n    `;\n  }).join('');\n\n  body.querySelectorAll('button[data-action]').forEach((btn) => {\n    btn.addEventListener('click', async (event) => {\n      event.preventDefault();\n      const especie = btn.getAttribute('data-especie');\n      if (!especie) return;\n      const action = btn.getAttribute('data-action');\n      const current = state.catalog.find((row) => row.especie === especie)\n        || state.portfolio.find((row) => row.especie === especie);\n      try {\n        if (action === 'remove') {\n          await overlay.withLoader(() => deleteJson(`/portfolio/instruments/${encodeURIComponent(especie)}`));\n        } else {\n          const category = current?.category ?? '';\n          const payload = {\n            especie,\n            name: current?.name ?? '',\n            type: CATEGORY_TYPES[category] ?? category,\n            exchange: current?.mercado ?? current?.panel ?? '',\n            currency: current?.currency ?? '',\n          };\n          await overlay.withLoader(() => postJson('/portfolio/instruments', payload));\n        }\n        await loadPortfolio();\n        rebuildCounts();\n        applyFilter();\n      } catch (error) {\n        setError(error?.error?.message ?? 'No se pudo actualizar el portafolio');\n      }\n    });\n  });\n};\n\nconst bindUi = () => {\n  document.getElementById('catalog-reload')?.addEventListener('click', () => {\n    overlay.withLoader(async () => {\n      await loadCatalog();\n      rebuildCounts();\n      applyFilter();\n    });\n  });\n  document.getElementById('ticker-category')?.addEventListener('change', applyFilter);\n  let searchTimer;\n  document.getElementById('ticker-search')?.addEventListener('input', () => {\n    if (searchTimer) clearTimeout(searchTimer);\n    searchTimer = setTimeout(async () => {\n      applyFilter();\n    }, 300);\n  });\n};\n\nconst init = async () => {\n  ensureAuthenticated();\n  renderToolbar();\n  bindToolbarNavigation();\n  setToolbarUserName('');\n  bindUserMenu({\n    onLogout: async () => {\n      try { await getJson('/auth/logout'); } finally { authStore.clearToken(); window.location.href = '/'; }\n    },\n    onAdmin: () => window.location.href = '/Frontend/usuarios.html',\n  });\n  highlightToolbar();\n  try {\n    state.profile = await getJson('/me');\n  } catch {\n    state.profile = authStore.getProfile();\n  }\n  setAdminMenuVisibility(state.profile);\n  setToolbarUserName(state.profile?.email ?? '');\n  await overlay.withLoader(async () => {\n    await loadPortfolio();\n    await loadCatalog();\n    rebuildCounts();\n    const categorySelect = document.getElementById('ticker-category');\n    if (categorySelect) {\n      categorySelect.value = state.portfolio.length > 0 ? 'selected' : 'all';\n    }\n    applyFilter();\n  });\n  bindUi();\n};\n\ndocument.addEventListener('DOMContentLoaded', init);\n"],
  "mappings": "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",
  "names": ["overlay", "state", "category"]
}
