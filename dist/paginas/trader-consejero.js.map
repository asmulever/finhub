{
  "version": 3,
  "sources": ["../../Frontend/auth/authStore.js", "../../Frontend/apicliente.js", "../../Frontend/components/loadingOverlay.js", "../../Frontend/components/toolbar.js", "../../Frontend/paginas/trader-consejero.js"],
  "sourcesContent": ["const TOKEN_KEY = 'finhub_token';\nconst TOKEN_EXP_KEY = 'finhub_token_exp';\nconst PROFILE_KEY = 'finhub_profile';\nconst storage = sessionStorage;\n\nconst nowSeconds = () => Math.floor(Date.now() / 1000);\n\nexport const authStore = {\n  getToken() {\n    const exp = Number(storage.getItem(TOKEN_EXP_KEY) || 0);\n    if (exp && nowSeconds() >= exp) {\n      this.clearToken();\n      return null;\n    }\n    return storage.getItem(TOKEN_KEY);\n  },\n  setToken(token, expiresInSeconds = 3600) {\n    storage.setItem(TOKEN_KEY, token);\n    storage.setItem(TOKEN_EXP_KEY, String(nowSeconds() + expiresInSeconds));\n  },\n  clearToken() {\n    storage.removeItem(TOKEN_KEY);\n    storage.removeItem(TOKEN_EXP_KEY);\n    storage.removeItem(PROFILE_KEY);\n  },\n  setProfile(profile) {\n    storage.setItem(PROFILE_KEY, JSON.stringify(profile));\n  },\n  getProfile() {\n    const value = storage.getItem(PROFILE_KEY);\n    return value ? JSON.parse(value) : null;\n  },\n};\n", "import { authStore } from './auth/authStore.js';\n\n/** Devuelve en tiempo de ejecuci\u00F3n la URL base que indica el entorno sin ning\u00FAn hardcode. */\nexport const getBaseUrl = (() => {\n  let cached = '';\n  return () => {\n    if (cached !== '') {\n      return cached;\n    }\n    const envBase = window.__ENV?.API_BASE_URL;\n    if (!envBase) {\n      throw new Error('API_BASE_URL no est\u00E1 configurada en window.__ENV');\n    }\n    cached = envBase.endsWith('/') ? envBase.slice(0, -1) : envBase;\n    return cached;\n  };\n})();\n\n/** Construye la URL final agregando la base configurada si la ruta es relativa. */\nconst buildUrl = (path) => (path.startsWith('http') ? path : `${getBaseUrl()}${path}`);\n\n/** Borra el token y redirige al login (forzando la ventana top) si el backend responde con 401. */\nconst handleUnauthorized = () => {\n  authStore.clearToken();\n  const target = '/';\n  if (window.top && window.top !== window) {\n    window.top.location.href = target;\n  } else {\n    window.location.href = target;\n  }\n};\n\n/** Fusiona headers adicionales con el header JSON obligatorio. */\nconst buildHeaders = (extraHeaders) => ({\n  'Content-Type': 'application/json',\n  ...extraHeaders,\n});\n\n/** Extrae el payload JSON o devuelve null si no viene contenido v\u00E1lido. */\nconst parsePayload = async (response) => response.json().catch(() => null);\n\n/**\n * Env\u00EDa una petici\u00F3n HTTP contra la API, gestionando tokens, errores y JSON.\n * @param path Ruta relativa o absoluta del recurso.\n * @param options Configuraci\u00F3n adicional de fetch.\n */\nexport const apiClient = async (path, options = {}) => {\n  const { method = 'GET', body, headers = {}, ...rest } = options;\n  const composedHeaders = buildHeaders(headers);\n  const token = authStore.getToken() ?? localStorage.getItem(\"jwt\");\n\n  if (token) {\n    composedHeaders.Authorization = `Bearer ${token}`;\n  }\n  \n  const response = await fetch(buildUrl(path), {\n    method,\n    credentials: 'include',\n    headers: composedHeaders,\n    body: body === undefined ? undefined : JSON.stringify(body),\n    ...rest,\n  });\n\n  const payload = await parsePayload(response);\n  if (!response.ok) {\n    if (response.status === 401) {\n      handleUnauthorized();\n    }\n    const err = payload?.error ?? {\n      code: `http.${response.status}`,\n      message: response.statusText,\n    };\n    throw { status: response.status, error: err };\n  }\n\n  return payload;\n};\n\n/** Genera un helper para m\u00E9todos que env\u00EDan body JSON. */\nconst withBody = (method) => (path, body) => apiClient(path, { method, body });\n\n/** Genera un helper para m\u00E9todos sin body. */\nconst withoutBody = (method) => (path) => apiClient(path, { method });\n\n/** Env\u00EDa un POST con body serializado. */\nexport const postJson = withBody('POST');\n\n/** Env\u00EDa un PATCH con body serializado. */\nexport const patchJson = withBody('PATCH');\n\n/** Ejecuta una petici\u00F3n DELETE sin body. */\nexport const deleteJson = withoutBody('DELETE');\n\n/** Ejecuta una petici\u00F3n GET sin body. */\nexport const getJson = withoutBody('GET');\n", "const STYLE_ID = 'app-loading-overlay-style';\n\nconst injectStyles = () => {\n  if (document.getElementById(STYLE_ID)) return;\n  const style = document.createElement('style');\n  style.id = STYLE_ID;\n  style.textContent = `\n    .app-loading-overlay {\n      position: fixed;\n      inset: 0;\n      background: rgba(3, 7, 18, 0.78);\n      backdrop-filter: blur(2px);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 9999;\n      opacity: 0;\n      pointer-events: none;\n      transition: opacity 0.18s ease;\n    }\n    .app-loading-overlay.visible {\n      opacity: 1;\n      pointer-events: all;\n    }\n    .app-loading-spinner {\n      width: 70px;\n      height: 70px;\n      border-radius: 50%;\n      border: 6px solid rgba(148, 163, 184, 0.35);\n      border-top-color: #22d3ee;\n      animation: app-spin 0.9s linear infinite;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);\n    }\n    @keyframes app-spin {\n      to { transform: rotate(360deg); }\n    }\n  `;\n  document.head.appendChild(style);\n};\n\n/** Crea un overlay reutilizable con spinner centrado. */\nexport const createLoadingOverlay = () => {\n  injectStyles();\n  const overlay = document.createElement('div');\n  overlay.className = 'app-loading-overlay';\n\n  const spinner = document.createElement('div');\n  spinner.className = 'app-loading-spinner';\n  overlay.appendChild(spinner);\n\n  const state = { counter: 0 };\n\n  const show = () => {\n    try {\n      state.counter += 1;\n      if (!overlay.isConnected) {\n        document.body.appendChild(overlay);\n      }\n      overlay.classList.add('visible');\n    } catch (error) {\n      console.info('[loadingOverlay] No se pudo mostrar overlay', error);\n    }\n  };\n\n  const hide = () => {\n    try {\n      state.counter = Math.max(0, state.counter - 1);\n      if (state.counter === 0) {\n        overlay.classList.remove('visible');\n      }\n    } catch (error) {\n      console.info('[loadingOverlay] No se pudo ocultar overlay', error);\n    }\n  };\n\n  const withLoader = async (fn) => {\n    show();\n    try {\n      return await fn();\n    } catch (error) {\n      console.info('[loadingOverlay] Error durante operaci\u00F3n envuelta', error);\n      throw error;\n    } finally {\n      hide();\n    }\n  };\n\n  return { show, hide, withLoader };\n};\n", "import { authStore } from '../auth/authStore.js';\n\nconst toolbarTemplate = `\n  <header class=\"toolbar\">\n    <div class=\"toolbar-logo\">\n      <a href=\"/Frontend/app.php\">\n        <img src=\"/logo/full_logoweb.png\" alt=\"FinHub\" style=\"height: 88px;\" />\n      </a>\n    </div>\n  <nav class=\"toolbar-menu\">\n      <button type=\"button\" class=\"icon-btn\" data-menu=\"portfolios\" data-link=\"/Frontend/Portafolios.html\" aria-label=\"Portafolios\">\n        <span class=\"circle-icon\">\uD83D\uDC5C</span>\n      </button>\n      <button type=\"button\" class=\"icon-btn\" data-menu=\"heatmap\" data-link=\"/Frontend/heatmap.html\" aria-label=\"Heatmap\">\n        <span class=\"circle-icon\">\uD83C\uDF21\uFE0F</span>\n      </button>\n      <button type=\"button\" class=\"icon-btn\" id=\"stats-menu\" data-menu=\"stats\" data-link=\"/Frontend/estadistica.html\" aria-label=\"Estad\u00EDstica\">\n        <span class=\"circle-icon\">\uD83D\uDCCA</span>\n      </button>\n      <button type=\"button\" class=\"icon-btn\" id=\"signals-menu\" data-menu=\"signals\" data-link=\"/Frontend/trader-consejero.html\" aria-label=\"Trader Consejero\">\n        <span class=\"circle-icon\">\uD83D\uDCB9</span>\n      </button>\n      <button type=\"button\" class=\"icon-btn\" id=\"oracle-menu\" data-menu=\"oracle\" data-link=\"/Frontend/oraculo.html\" aria-label=\"Or\u00E1culo\">\n        <span class=\"circle-icon\">\uD83D\uDD2E</span>\n      </button>\n      <button type=\"button\" class=\"icon-btn\" id=\"radar-menu\" data-menu=\"radar\" data-link=\"/Frontend/radar.html\" aria-label=\"Radar\">\n        <span class=\"circle-icon\">\uD83D\uDCE1</span>\n      </button>\n    </nav>\n    <div class=\"toolbar-user\">\n      <button id=\"user-menu-button\" type=\"button\">\n        <span id=\"user-name\">Usuario</span>\n        <span class=\"chevron\">\u25BE</span>\n      </button>\n    </div>\n    <button class=\"toolbar-toggle\" type=\"button\" aria-expanded=\"true\" aria-label=\"Ocultar barra\" title=\"Ocultar barra\">\u25B2</button>\n  </header>\n  <div class=\"user-dropdown\" id=\"user-dropdown\">\n    <button id=\"admin-users-action\" type=\"button\">Admin Usuarios</button>\n    <button id=\"logout-action\" type=\"button\">Cerrar sesi\u00F3n</button>\n  </div>\n`;\n\nlet toolbarMounted = false;\nconst isAdminProfile = (profile) => String(profile?.role ?? '').toLowerCase() === 'admin';\n\nconst ensureToolbarStyles = () => {\n  if (document.getElementById('toolbar-collapsible-style')) return;\n  const style = document.createElement('style');\n  style.id = 'toolbar-collapsible-style';\n  style.textContent = `\n    #toolbar-root > header.toolbar {\n      padding: 10px 56px 10px 12px;\n      gap: 10px;\n    }\n    .toolbar.has-toggle { position: sticky; top: 0; z-index: 15; padding-bottom: 28px; position: relative; }\n    .toolbar-toggle {\n      position: absolute;\n      right: 12px;\n      bottom: 6px;\n      width: 36px;\n      height: 36px;\n      border-radius: 999px;\n      border: 1px solid rgba(148, 163, 184, 0.45);\n      background: rgba(15, 23, 42, 0.85);\n      color: #e2e8f0;\n      cursor: pointer;\n      display: grid;\n      place-items: center;\n      box-shadow: 0 10px 30px rgba(0,0,0,0.35);\n    }\n    /* Cuando la barra est\u00E1 colapsada, dejamos el bot\u00F3n sobresalir >50% hacia abajo */\n    .toolbar.collapsed .toolbar-toggle {\n      bottom: -20px;\n    }\n    .toolbar-toggle:focus-visible { outline: 2px solid rgba(14, 165, 233, 0.6); outline-offset: 2px; }\n    .toolbar.collapsed .toolbar-menu,\n    .toolbar.collapsed .toolbar-user,\n    .toolbar.collapsed .toolbar-logo { display: none !important; }\n    .toolbar.collapsed { padding-bottom: 16px; }\n    .toolbar-logo img { border: none; outline: none; box-shadow: none; margin: 0; padding: 0; height: 72px; }\n    .toolbar-menu .icon-btn {\n      width: 40px;\n      height: 40px;\n      border-radius: 50%;\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      padding: 0;\n      border: none;\n      box-shadow: none;\n      background: rgba(15, 23, 42, 0.9);\n    }\n    .circle-icon { font-size: 1.1rem; line-height: 1; }\n    .toolbar-menu button,\n    .toolbar-menu select {\n      margin: 0;\n      border: none;\n      box-shadow: none;\n    }\n    @media (max-width: 768px) {\n      .toolbar {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        grid-auto-rows: auto;\n        align-items: center;\n        gap: 6px 10px;\n        padding: 8px 56px 28px 12px;\n      }\n      .toolbar-logo {\n        grid-column: 1 / 2;\n        grid-row: 1;\n        display: flex;\n        align-items: center;\n        margin: 0;\n      }\n      .toolbar-user {\n        grid-column: 2 / 3;\n        grid-row: 1;\n        display: flex;\n        justify-content: flex-end;\n        align-items: center;\n        min-width: 0;\n        margin: 0;\n      }\n      .toolbar-menu {\n        grid-column: 1 / 3;\n        grid-row: 2;\n        width: 100%;\n        display: flex;\n        flex-wrap: wrap;\n        gap: 6px;\n        justify-content: flex-start;\n        margin-top: 4px;\n      }\n      .toolbar-menu button,\n      .toolbar-menu select {\n        padding: 8px 10px;\n        min-width: auto;\n        margin: 0;\n        border: none;\n        box-shadow: none;\n      }\n    }\n  `;\n  document.head.appendChild(style);\n};\n\nexport const setAdminMenuVisibility = (profile) => {\n  const adminButton = document.getElementById('admin-users-action');\n  const signalsButton = document.getElementById('signals-menu');\n  const isAdmin = isAdminProfile(profile);\n  if (adminButton) adminButton.hidden = !isAdmin;\n  if (signalsButton) signalsButton.hidden = false;\n};\n\nexport const renderToolbar = () => {\n  const container = document.getElementById('toolbar-root');\n  if (!container || toolbarMounted) {\n    return;\n  }\n  ensureToolbarStyles();\n  container.innerHTML = toolbarTemplate;\n  toolbarMounted = true;\n  const cachedProfile = authStore.getProfile();\n  setAdminMenuVisibility(cachedProfile);\n};\n\nexport const highlightToolbar = () => {\n  const path = window.location.pathname;\n  document.querySelectorAll('.toolbar-menu button').forEach((button) => {\n    const link = button.getAttribute('data-link');\n    button.classList.toggle('active', link === path);\n  });\n};\n\nconst updateToggleVisual = (toolbar, toggle) => {\n  const collapsed = toolbar.classList.contains('collapsed');\n  toggle.textContent = collapsed ? '\u25BC' : '\u25B2';\n  toggle.setAttribute('aria-expanded', String(!collapsed));\n  toggle.setAttribute('aria-label', collapsed ? 'Mostrar barra' : 'Ocultar barra');\n  toggle.title = collapsed ? 'Mostrar barra' : 'Ocultar barra';\n};\n\nexport const collapseToolbar = () => {\n  const toolbar = document.querySelector('.toolbar');\n  if (!toolbar) return;\n  toolbar.classList.add('collapsed');\n  const toggle = document.querySelector('.toolbar-toggle');\n  if (toggle) {\n    updateToggleVisual(toolbar, toggle);\n  }\n};\n\nconst bindToolbarToggle = () => {\n  const toolbar = document.querySelector('.toolbar');\n  const toggle = document.querySelector('.toolbar-toggle');\n  if (!toolbar || !toggle) return;\n  toolbar.classList.add('has-toggle');\n  updateToggleVisual(toolbar, toggle);\n  toggle.addEventListener('click', () => {\n    toolbar.classList.toggle('collapsed');\n    updateToggleVisual(toolbar, toggle);\n  });\n};\n\nexport const bindToolbarNavigation = () => {\n  const frame = document.getElementById('app-frame');\n  document.querySelectorAll('.toolbar-menu button').forEach((button) => {\n    button.addEventListener('click', (event) => {\n      const link = button.getAttribute('data-link');\n      if (!link) return;\n      if (frame) {\n        event.preventDefault();\n        if (frame.src !== link) {\n          frame.src = link;\n        }\n        document.querySelectorAll('.toolbar-menu button').forEach((b) => b.classList.remove('active'));\n        button.classList.add('active');\n        return;\n      }\n      event.preventDefault();\n      window.location.href = link;\n    });\n  });\n  bindToolbarToggle();\n};\n\nexport const setToolbarUserName = (name) => {\n  const label = document.getElementById('user-name');\n  if (!label) return;\n  label.textContent = name && name.length ? name : 'Usuario';\n};\n\nexport const bindUserMenu = ({ onLogout, onAdmin, profile } = {}) => {\n  const menuButton = document.getElementById('user-menu-button');\n  const dropdown = document.getElementById('user-dropdown');\n  if (!menuButton || !dropdown) return;\n  setAdminMenuVisibility(profile ?? authStore.getProfile());\n\n  menuButton.addEventListener('click', () => {\n    dropdown.classList.toggle('visible');\n  });\n\n  document.addEventListener('click', (event) => {\n    if (!menuButton.contains(event.target) && !dropdown.contains(event.target)) {\n      dropdown.classList.remove('visible');\n    }\n  });\n\n  const adminButton = document.getElementById('admin-users-action');\n  const logoutButton = document.getElementById('logout-action');\n  adminButton?.addEventListener('click', (event) => {\n    event.preventDefault();\n    dropdown.classList.remove('visible');\n    if (typeof onAdmin === 'function') {\n      onAdmin();\n    }\n  });\n  logoutButton?.addEventListener('click', (event) => {\n    event.preventDefault();\n    dropdown.classList.remove('visible');\n    if (typeof onLogout === 'function') {\n      onLogout();\n    }\n  });\n};\n", "import { getJson } from '../apicliente.js';\nimport { createLoadingOverlay } from '../components/loadingOverlay.js';\nimport { collapseToolbar } from '../components/toolbar.js';\n\nconst overlay = createLoadingOverlay();\nconst state = {\n  signals: [],\n  selected: null,\n  lastChartSymbol: '',\n  instruments: [],\n  chartControls: {\n    start: null,\n    end: null,\n    preset: '1y',\n    touchZoom: false,\n  },\n};\n\n// --- R2Lite helpers -------------------------------------------------------\n\nconst guessCategory = (item) => {\n  const type = String(item?.type ?? '').toUpperCase();\n  const country = String(item?.country ?? '').toUpperCase();\n  const currency = String(item?.currency ?? '').toUpperCase();\n  const symbol = String(item?.symbol ?? item?.especie ?? '').toUpperCase();\n  if (type.includes('BOND') || type.includes('BONO')) return 'BONO';\n  if (type.includes('CEDEAR') || symbol.endsWith('D')) return 'CEDEAR';\n  if (country === 'AR' || currency === 'ARS') return 'ACCIONES_AR';\n  return 'MERCADO_GLOBAL';\n};\n\nconst providerFor = (category) => {\n  if (category === 'MERCADO_GLOBAL') return 'twelvedata';\n  return 'rava';\n};\n\nconst fetchPortfolioInstruments = async () => {\n  const resp = await getJson('/portfolio/instruments');\n  const items = Array.isArray(resp?.data) ? resp.data : [];\n  state.instruments = items;\n  return items;\n};\n\nconst ensureSnapshots = async (symbolsInput) => {\n  const items = state.instruments.length ? state.instruments : await fetchPortfolioInstruments();\n  const symbolsSet = new Set((symbolsInput && symbolsInput.length ? symbolsInput : items.map((i) => i.symbol || i.especie || '')).map((s) => String(s).toUpperCase()).filter(Boolean));\n  if (!symbolsSet.size) return { ok: false, details: [] };\n\n  const byCategory = {};\n  items.forEach((it) => {\n    const sym = String(it.symbol || it.especie || '').toUpperCase();\n    if (!symbolsSet.has(sym)) return;\n    const cat = guessCategory(it);\n    byCategory[cat] = byCategory[cat] || [];\n    byCategory[cat].push(sym);\n  });\n\n  const details = [];\n  for (const [category, symbols] of Object.entries(byCategory)) {\n    const provider = providerFor(category);\n    if (!symbols.length) continue;\n    const qs = encodeURIComponent(symbols.join(','));\n    try {\n      const res = await getJson(`/r2lite/${provider}/daily?symbols=${qs}&category=${encodeURIComponent(category)}`);\n      details.push({ category, provider, count: res?.count ?? 0, symbols });\n    } catch (error) {\n      console.info('[trader-consejero] R2Lite fallo', category, error);\n      details.push({ category, provider, error: error?.error?.message ?? 'error', symbols });\n    }\n  }\n  const ok = details.every((d) => !d.error);\n  return { ok, details };\n};\n\nconst formatPct = (v, digits = 2) => (Number.isFinite(v) ? `${(v * 100).toFixed(digits)}%` : '\u2014');\nconst formatNum = (v, digits = 2) => (Number.isFinite(v) ? v.toFixed(digits) : '\u2014');\nconst formatAction = (a) => {\n  const act = String(a ?? '').toUpperCase();\n  if (act === 'BUY') return `<span class=\"signal-buy\">Compra</span>`;\n  if (act === 'SELL') return `<span class=\"signal-sell\">Venta</span>`;\n  if (act === 'HOLD') return `<span class=\"signal-hold\">Mantener</span>`;\n  return act || '\u2014';\n};\n\nconst setStatus = (msg, type = '') => {\n  const el = document.getElementById('status-box');\n  if (!el) return;\n  el.textContent = msg || '';\n  el.className = `status ${type}`;\n};\n\nconst renderTable = () => {\n  const body = document.getElementById('signals-body');\n  if (!body) return;\n  if (!state.signals.length) {\n    body.innerHTML = '<tr><td colspan=\"9\" class=\"muted\">Sin se\u00F1ales disponibles.</td></tr>';\n    return;\n  }\n  body.innerHTML = state.signals.map((s) => {\n    const range = `${formatPct(s.range_p10_pct)} \u00B7 ${formatPct(s.range_p90_pct)}`;\n    const stopTake = `${formatNum(s.stop_price)} / ${formatNum(s.take_price)}`;\n    return `\n      <tr data-symbol=\"${s.especie || s.symbol}\">\n        <td>${s.especie || s.symbol}</td>\n        <td data-action-symbol=\"${s.especie || s.symbol}\">${formatAction(s.action)}</td>\n        <td>${formatPct(s.confidence, 1)}</td>\n        <td>${s.horizon_days || '\u2014'}d</td>\n        <td>${formatPct(s.exp_return_pct)}</td>\n        <td>${range}</td>\n        <td>${stopTake}</td>\n        <td>${s.rationale_short ?? '\u2014'}</td>\n        <td><button class=\"icon-button\" data-symbol=\"${s.especie || s.symbol}\">\uD83D\uDCC8 Gr\u00E1fico</button></td>\n      </tr>\n    `;\n  }).join('');\n  body.querySelectorAll('button[data-symbol]').forEach((btn) => {\n    btn.addEventListener('click', async () => {\n      const sym = btn.getAttribute('data-symbol') || '';\n      const signal = state.signals.find((x) => (x.especie || x.symbol) === sym);\n      if (signal) {\n        state.selected = signal;\n        renderDetail();\n        await overlay.withLoader(() => openChart(signal));\n      }\n    });\n  });\n  body.querySelectorAll('td[data-action-symbol]').forEach((cell) => {\n    cell.style.cursor = 'pointer';\n    cell.title = 'Ver detalle de la se\u00F1al';\n    cell.addEventListener('click', () => {\n      const sym = cell.getAttribute('data-action-symbol') || '';\n      const signal = state.signals.find((x) => (x.especie || x.symbol) === sym);\n      if (signal) {\n        state.selected = signal;\n        renderDetail();\n      }\n    });\n  });\n};\n\nconst renderDetail = () => {\n  const panel = document.getElementById('detail-panel');\n  if (!panel) return;\n  const s = state.selected;\n  if (!s) {\n    panel.innerHTML = 'Selecciona una se\u00F1al.';\n    return;\n  }\n  panel.innerHTML = `\n    <div class=\"grid\">\n      <div class=\"stat\"><strong>Acci\u00F3n</strong><div>${formatAction(s.action)}</div></div>\n      <div class=\"stat\"><strong>Confianza</strong><div>${formatPct(s.confidence,1)}</div></div>\n      <div class=\"stat\"><strong>Retorno esperado</strong><div>${formatPct(s.exp_return_pct)}</div></div>\n      <div class=\"stat\"><strong>Rango P10-P90</strong><div>${formatPct(s.range_p10_pct)} \u00B7 ${formatPct(s.range_p90_pct)}</div></div>\n      <div class=\"stat\"><strong>Stop / Take</strong><div>${formatNum(s.stop_price)} / ${formatNum(s.take_price)}</div></div>\n      <div class=\"stat\"><strong>Trend / Momentum</strong><div>${s.trend_state ?? 'N/D'} \u00B7 ${s.momentum_state ?? 'N/D'}</div></div>\n      <div class=\"stat\"><strong>ATR</strong><div>${formatNum(s.volatility_atr)}</div></div>\n      <div class=\"stat\"><strong>Data</strong><div>${s.data_quality ?? 'N/D'} \u00B7 ${s.data_points_used ?? '\u2014'} velas</div></div>\n    </div>\n    <p class=\"muted\" style=\"margin-top:10px;\">${s.rationale_short ?? 'Sin explicaci\u00F3n'} \u00B7 Tags: ${(s.rationale_tags ?? []).join(', ')}</p>\n  `;\n};\n\nconst filterByRangeDays = (points, days) => {\n  if (!Number.isFinite(days) || days <= 0) return points;\n  const cutoff = new Date();\n  cutoff.setDate(cutoff.getDate() - days);\n  return points.filter((p) => p.t >= cutoff);\n};\n\nconst filterByDateRange = (points, start, end) => {\n  if (!(start instanceof Date) || !(end instanceof Date)) return points;\n  return points.filter((p) => p.t >= start && p.t <= end);\n};\n\nconst computeRsi = (points, period = 14) => {\n  const closes = points.map((p) => p.close);\n  if (closes.length <= period) return points.map((p) => ({ t: p.t, v: null }));\n  const rsis = [];\n  let gains = 0;\n  let losses = 0;\n  for (let i = 1; i <= period; i++) {\n    const diff = closes[i] - closes[i - 1];\n    if (diff >= 0) gains += diff; else losses -= diff;\n  }\n  let avgGain = gains / period;\n  let avgLoss = losses / period;\n  const firstRsi = 100 - (100 / (1 + (avgLoss === 0 ? Infinity : avgGain / avgLoss)));\n  rsis[period] = firstRsi;\n  for (let i = period + 1; i < closes.length; i++) {\n    const diff = closes[i] - closes[i - 1];\n    const gain = diff > 0 ? diff : 0;\n    const loss = diff < 0 ? -diff : 0;\n    avgGain = ((avgGain * (period - 1)) + gain) / period;\n    avgLoss = ((avgLoss * (period - 1)) + loss) / period;\n    const rs = avgLoss === 0 ? Infinity : avgGain / avgLoss;\n    rsis[i] = 100 - (100 / (1 + rs));\n  }\n  return points.map((p, idx) => ({ t: p.t, v: rsis[idx] ?? null }));\n};\n\nconst buildTicks = (min, max, count = 4) => {\n  const ticks = [];\n  if (!Number.isFinite(min) || !Number.isFinite(max)) return ticks;\n  const step = (max - min) / Math.max(1, count);\n  for (let i = 0; i <= count; i++) ticks.push(min + step * i);\n  return ticks;\n};\n\nconst drawAxes = (ctx, margin, width, height, minX, maxX, minY, maxY) => {\n  ctx.strokeStyle = 'rgba(148,163,184,0.35)';\n  ctx.beginPath();\n  ctx.moveTo(margin.left, margin.top);\n  ctx.lineTo(margin.left, margin.top + height);\n  ctx.lineTo(margin.left + width, margin.top + height);\n  ctx.stroke();\n  const yTicks = buildTicks(minY, maxY, 4);\n  ctx.fillStyle = '#94a3b8';\n  ctx.font = '11px Inter, system-ui, sans-serif';\n  yTicks.forEach((val) => {\n    const y = margin.top + height - ((val - minY) / Math.max(1e-6, maxY - minY)) * height;\n    ctx.fillText(val.toFixed(2), 6, y + 4);\n    ctx.strokeStyle = 'rgba(148,163,184,0.15)';\n    ctx.beginPath();\n    ctx.moveTo(margin.left, y);\n    ctx.lineTo(margin.left + width, y);\n    ctx.stroke();\n  });\n  const xTicks = buildTicks(minX, maxX, 3);\n  xTicks.forEach((val) => {\n    const x = margin.left + ((val - minX) / Math.max(1, maxX - minX)) * width;\n    const d = new Date(val);\n    const label = `${String(d.getDate()).padStart(2, '0')}/${String(d.getMonth() + 1).padStart(2, '0')}`;\n    ctx.fillText(label, x - 14, margin.top + height + 16);\n    ctx.strokeStyle = 'rgba(148,163,184,0.15)';\n    ctx.beginPath();\n    ctx.moveTo(x, margin.top);\n    ctx.lineTo(x, margin.top + height);\n    ctx.stroke();\n  });\n};\n\nconst drawPriceChart = (points) => {\n  const canvas = document.getElementById('price-canvas');\n  if (!canvas) return;\n  const ctx = canvas.getContext('2d');\n  if (!ctx) return;\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  if (!points.length) {\n    ctx.fillStyle = '#94a3b8';\n    ctx.fillText('Sin datos para graficar', 20, 30);\n    return;\n  }\n  const margin = { top: 20, right: 20, bottom: 60, left: 70 };\n  const width = canvas.width - margin.left - margin.right;\n  const height = canvas.height - margin.top - margin.bottom;\n  const xs = points.map((p) => p.t.getTime());\n  const highs = points.map((p) => p.high ?? p.close);\n  const lows = points.map((p) => p.low ?? p.close);\n  const maxX = Math.max(...xs);\n  const minX = Math.min(...xs);\n  const maxY = Math.max(...highs);\n  const minY = Math.min(...lows);\n  drawAxes(ctx, margin, width, height, minX, maxX, minY, maxY);\n  const scaleX = (t) => margin.left + ((t - minX) / Math.max(1, maxX - minX)) * width;\n  const scaleY = (v) => margin.top + height - ((v - minY) / Math.max(1e-6, maxY - minY)) * height;\n\n  // Volumen\n  const volHeight = 60;\n  const volTop = margin.top + height - volHeight;\n  const maxVol = Math.max(...points.map((p) => p.volume ?? 0), 1);\n  ctx.fillStyle = 'rgba(56,189,248,0.12)';\n  points.forEach((p) => {\n    const x = scaleX(p.t.getTime());\n    const barWidth = Math.max(2, width / points.length * 0.8);\n    const vol = p.volume ?? 0;\n    const vh = (vol / maxVol) * volHeight;\n    ctx.fillRect(x - barWidth / 2, volTop + volHeight - vh, barWidth, vh);\n  });\n\n  // Velas\n  points.forEach((p) => {\n    const x = scaleX(p.t.getTime());\n    const w = Math.max(3, width / points.length * 0.7);\n    const open = Number.isFinite(p.open) ? p.open : p.close;\n    const close = Number.isFinite(p.close) ? p.close : open;\n    const high = Number.isFinite(p.high) ? p.high : Math.max(open, close);\n    const low = Number.isFinite(p.low) ? p.low : Math.min(open, close);\n    const color = close >= open ? '#22c55e' : '#ef4444';\n    ctx.strokeStyle = color;\n    ctx.beginPath();\n    ctx.moveTo(x, scaleY(high));\n    ctx.lineTo(x, scaleY(low));\n    ctx.stroke();\n    ctx.fillStyle = color;\n    const yOpen = scaleY(open);\n    const yClose = scaleY(close);\n    const rectY = Math.min(yOpen, yClose);\n    const rectH = Math.max(2, Math.abs(yOpen - yClose));\n    ctx.fillRect(x - w / 2, rectY, w, rectH);\n  });\n\n  ctx.fillStyle = '#22d3ee';\n  ctx.font = '12px Inter, system-ui, sans-serif';\n  ctx.fillText('Velas + Volumen', margin.left + 8, margin.top + 14);\n};\n\nconst drawRsiChart = (points) => {\n  const canvas = document.getElementById('rsi-canvas');\n  if (!canvas) return;\n  const ctx = canvas.getContext('2d');\n  if (!ctx) return;\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  if (!points.length) {\n    ctx.fillStyle = '#94a3b8';\n    ctx.fillText('Sin RSI disponible', 20, 30);\n    return;\n  }\n  const margin = { top: 16, right: 20, bottom: 24, left: 60 };\n  const width = canvas.width - margin.left - margin.right;\n  const height = canvas.height - margin.top - margin.bottom;\n  const xs = points.map((p) => p.t.getTime());\n  const minX = Math.min(...xs);\n  const maxX = Math.max(...xs);\n  const minY = 0;\n  const maxY = 100;\n  drawAxes(ctx, margin, width, height, minX, maxX, minY, maxY);\n  const scaleX = (t) => margin.left + ((t - minX) / Math.max(1, maxX - minX)) * width;\n  const scaleY = (v) => margin.top + height - ((v - minY) / Math.max(1e-6, maxY - minY)) * height;\n\n  ctx.strokeStyle = 'rgba(248, 113, 113, 0.4)';\n  ctx.beginPath();\n  ctx.moveTo(margin.left, scaleY(70));\n  ctx.lineTo(margin.left + width, scaleY(70));\n  ctx.stroke();\n  ctx.strokeStyle = 'rgba(34, 197, 94, 0.4)';\n  ctx.beginPath();\n  ctx.moveTo(margin.left, scaleY(30));\n  ctx.lineTo(margin.left + width, scaleY(30));\n  ctx.stroke();\n\n  ctx.strokeStyle = '#a855f7';\n  ctx.beginPath();\n  points.forEach((p, idx) => {\n    if (!Number.isFinite(p.v)) return;\n    const x = scaleX(p.t.getTime());\n    const y = scaleY(p.v);\n    if (idx === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);\n  });\n  ctx.stroke();\n  ctx.fillStyle = '#a855f7';\n  ctx.font = '12px Inter, system-ui, sans-serif';\n  ctx.fillText('RSI 14', margin.left + 8, margin.top + 14);\n};\n\nconst openChart = async (signal) => {\n  collapseToolbar();\n  const overlayEl = document.getElementById('chart-overlay');\n  if (!overlayEl) return;\n  const presetSel = document.getElementById('chart-preset');\n  const startInput = document.getElementById('chart-start');\n  const endInput = document.getElementById('chart-end');\n  const touchZoom = document.getElementById('chart-touch-zoom');\n\n  state.lastChartSymbol = signal.especie || signal.symbol;\n  state.chartControls.preset = presetSel?.value || '1y';\n  state.chartControls.touchZoom = !!touchZoom?.checked;\n\n  const applyPreset = (preset) => {\n    const end = new Date();\n    let start = new Date(end);\n    switch (preset) {\n      case '1m': start.setMonth(end.getMonth() - 1); break;\n      case '6m': start.setMonth(end.getMonth() - 6); break;\n      case '1y': start.setFullYear(end.getFullYear() - 1); break;\n      default: start = null;\n    }\n    return { start, end };\n  };\n\n  if (state.chartControls.preset !== 'custom') {\n    const { start, end } = applyPreset(state.chartControls.preset);\n    if (start && startInput) startInput.value = start.toISOString().slice(0, 10);\n    if (end && endInput) endInput.value = end.toISOString().slice(0, 10);\n    state.chartControls.start = start;\n    state.chartControls.end = end;\n  } else {\n    state.chartControls.start = startInput?.value ? new Date(startInput.value) : null;\n    state.chartControls.end = endInput?.value ? new Date(endInput.value) : null;\n  }\n\n  let series = Array.isArray(signal.series_json) ? signal.series_json : [];\n  if (!series.length) {\n    // Si no hay serie embebida, primero asegurar snapshot para el s\u00EDmbolo, luego leer DataLake.\n    await ensureSnapshots([signal.especie || signal.symbol]);\n    const preset = state.chartControls.preset;\n    const period = preset === 'custom' ? '12m' : (preset === 'all' ? '12m' : preset);\n    const resp = await getJson(`/datalake/prices/series?symbol=${encodeURIComponent(signal.especie || signal.symbol)}&period=${period}`);\n    const points = Array.isArray(resp?.points) ? resp.points : [];\n    series = points.map((p) => ({\n      t: p.t ? new Date(p.t) : new Date(),\n      open: Number(p.open ?? p.o ?? p.close ?? p.price ?? 0),\n      high: Number(p.high ?? p.h ?? p.close ?? p.price ?? 0),\n      low: Number(p.low ?? p.l ?? p.close ?? p.price ?? 0),\n      close: Number(p.close ?? p.price ?? 0),\n      volume: Number(p.volume ?? p.v ?? 0),\n      ema20: null,\n      ema50: null,\n      rsi14: null,\n      bb_upper: null,\n      bb_lower: null,\n    }));\n  } else {\n    series = series.map((p) => ({\n      t: p.t ? new Date(p.t) : new Date(),\n      open: Number(p.open ?? p.o ?? p.close ?? 0),\n      high: Number(p.high ?? p.h ?? p.close ?? 0),\n      low: Number(p.low ?? p.l ?? p.close ?? 0),\n      close: Number(p.close ?? 0),\n      volume: Number(p.volume ?? p.v ?? 0),\n      ema20: Number.isFinite(p.ema20) ? Number(p.ema20) : null,\n      ema50: Number.isFinite(p.ema50) ? Number(p.ema50) : null,\n      rsi14: Number.isFinite(p.rsi14) ? Number(p.rsi14) : null,\n      bb_upper: Number.isFinite(p.bb_upper) ? Number(p.bb_upper) : null,\n      bb_lower: Number.isFinite(p.bb_lower) ? Number(p.bb_lower) : null,\n    }));\n  }\n\n  let filtered = series;\n  if (state.chartControls.start && state.chartControls.end) {\n    filtered = filterByDateRange(series, state.chartControls.start, state.chartControls.end);\n  } else if (state.chartControls.preset !== 'all') {\n    const days = (() => {\n      switch (state.chartControls.preset) {\n        case '1m': return 30;\n        case '3m': return 90;\n        case '6m': return 180;\n        case '1y': return 365;\n        case '2y': return 730;\n        default: return null;\n      }\n    })();\n    filtered = days ? filterByRangeDays(series, days) : series;\n  }\n  if (!filtered.length) {\n    const title = document.getElementById('chart-title');\n    const subtitle = document.getElementById('chart-subtitle');\n    if (title) title.textContent = signal.especie || signal.symbol;\n    if (subtitle) subtitle.textContent = 'Sin datos en el rango seleccionado';\n    overlayEl.classList.add('visible');\n    overlayEl.setAttribute('aria-hidden', 'false');\n    return;\n  }\n\n  const rsiPoints = filtered.some((p) => Number.isFinite(p.rsi14))\n    ? filtered.map((p) => ({ t: p.t, v: p.rsi14 ?? null })).filter((p) => Number.isFinite(p.v))\n    : computeRsi(filtered, 14);\n  drawPriceChart(filtered);\n  drawRsiChart(rsiPoints);\n\n  const title = document.getElementById('chart-title');\n  const subtitle = document.getElementById('chart-subtitle');\n  if (title) title.textContent = signal.especie || signal.symbol;\n  if (subtitle) {\n    let label = 'Hist\u00F3rico + Indicadores';\n    if (state.chartControls.start && state.chartControls.end) {\n      label = `Hist\u00F3rico ${state.chartControls.start.toISOString().slice(0,10)} a ${state.chartControls.end.toISOString().slice(0,10)}`;\n    } else if (state.chartControls.preset && state.chartControls.preset !== 'all') {\n      label = `Hist\u00F3rico ${state.chartControls.preset}`;\n    }\n    subtitle.textContent = label;\n  }\n\n  document.querySelectorAll('.chart-canvas-wrap').forEach((wrap) => {\n    wrap.style.touchAction = state.chartControls.touchZoom ? 'pan-y pinch-zoom' : 'auto';\n  });\n\n  overlayEl.classList.add('visible');\n  overlayEl.setAttribute('aria-hidden', 'false');\n  document.body.classList.add('no-scroll');\n};\n\nconst closeOverlay = () => {\n  const overlayEl = document.getElementById('chart-overlay');\n  if (!overlayEl) return;\n  overlayEl.classList.remove('visible');\n  overlayEl.setAttribute('aria-hidden', 'true');\n  document.body.classList.remove('no-scroll');\n};\n\nconst fetchSignals = async ({ force = false, collect = false } = {}) => {\n  const label = force ? 'Recalculando tendencias...' : 'Cargando se\u00F1ales...';\n  setStatus(label, 'info');\n  // Ingesta previa con R2Lite para los s\u00EDmbolos actuales del portafolio\n  const ingest = await ensureSnapshots();\n  if (!ingest.ok) {\n    setStatus('No se pudieron preparar snapshots (R2Lite)', 'error');\n    return;\n  }\n\n  const buildQuery = (opts) => {\n    const params = [];\n    if (opts.force) params.push('force=1');\n    if (opts.collect) params.push('collect=1');\n    return params.length ? `?${params.join('&')}` : '';\n  };\n\n  const load = async (opts) => {\n    const resp = await getJson(`/signals/latest${buildQuery(opts)}`);\n    return Array.isArray(resp?.data) ? resp.data : [];\n  };\n\n  let data = [];\n  try {\n    data = await load({ force, collect });\n  } catch (error) {\n    console.info('[trader-consejero] Reintento sin collect', error);\n    if (collect) {\n      data = await load({ force, collect: false });\n    } else if (force) {\n      console.info('[trader-consejero] Reintento sin force', error);\n      data = await load({ force: false, collect: false });\n    } else {\n      throw error;\n    }\n  }\n\n  state.signals = data.map((s) => ({\n    ...s,\n    symbol: (s.symbol ?? '').toUpperCase(),\n    especie: (s.especie ?? s.symbol ?? '').toUpperCase(),\n    rationale_tags: Array.isArray(s.rationale_tags) ? s.rationale_tags : [],\n  }));\n\n  document.getElementById('badge-count').textContent = `${state.signals.length} se\u00F1ales`;\n  document.getElementById('badge-updated').textContent = `Actualizado: ${new Date().toISOString().slice(0,16)}`;\n  renderTable();\n  setStatus('', '');\n};\n\nconst bindUi = () => {\n  document.getElementById('btn-refresh')?.addEventListener('click', () => {\n    overlay.withLoader(() => fetchSignals({ force: true, collect: true }))\n      .catch((error) => {\n        console.info('[trader-consejero] No se pudieron actualizar tendencias', error);\n        setStatus('No se pudieron actualizar las tendencias', 'error');\n      });\n  });\n  document.getElementById('chart-close-btn')?.addEventListener('click', closeOverlay);\n  document.getElementById('chart-overlay')?.addEventListener('click', (e) => {\n    if (e.target?.id === 'chart-overlay') closeOverlay();\n  });\n  ['chart-preset', 'chart-start', 'chart-end', 'chart-touch-zoom'].forEach((id) => {\n    document.getElementById(id)?.addEventListener('change', () => {\n      const signal = state.signals.find((s) => (s.especie || s.symbol) === state.lastChartSymbol);\n      if (signal) {\n        overlay.withLoader(() => openChart(signal)).catch(() => setStatus('No se pudo recargar gr\u00E1fico', 'error'));\n      }\n    });\n  });\n};\n\nconst init = async () => {\n  bindUi();\n  // Default fechas 1 a\u00F1o\n  const end = new Date();\n  const start = new Date();\n  start.setFullYear(end.getFullYear() - 1);\n  const startInput = document.getElementById('chart-start');\n  const endInput = document.getElementById('chart-end');\n  if (startInput) startInput.value = start.toISOString().slice(0, 10);\n  if (endInput) endInput.value = end.toISOString().slice(0, 10);\n  try {\n    await overlay.withLoader(() => fetchSignals({ force: true, collect: true }));\n  } catch (error) {\n    console.info('[trader-consejero] No se pudieron cargar se\u00F1ales iniciales', error);\n    setStatus('No se pudieron cargar las se\u00F1ales iniciales', 'error');\n  }\n};\n\ndocument.addEventListener('DOMContentLoaded', init);\n"],
  "mappings": "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",
  "names": ["overlay", "state", "title", "subtitle"]
}
