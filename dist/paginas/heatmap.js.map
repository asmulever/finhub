{
  "version": 3,
  "sources": ["../../Frontend/auth/authStore.js", "../../Frontend/apicliente.js", "../../Frontend/components/toolbar.js", "../../Frontend/components/loadingOverlay.js", "../../Frontend/paginas/heatmap.js"],
  "sourcesContent": ["const TOKEN_KEY = 'finhub_token';\nconst TOKEN_EXP_KEY = 'finhub_token_exp';\nconst PROFILE_KEY = 'finhub_profile';\nconst storage = sessionStorage;\n\nconst nowSeconds = () => Math.floor(Date.now() / 1000);\n\nexport const authStore = {\n  getToken() {\n    const exp = Number(storage.getItem(TOKEN_EXP_KEY) || 0);\n    if (exp && nowSeconds() >= exp) {\n      this.clearToken();\n      return null;\n    }\n    return storage.getItem(TOKEN_KEY);\n  },\n  setToken(token, expiresInSeconds = 3600) {\n    storage.setItem(TOKEN_KEY, token);\n    storage.setItem(TOKEN_EXP_KEY, String(nowSeconds() + expiresInSeconds));\n  },\n  clearToken() {\n    storage.removeItem(TOKEN_KEY);\n    storage.removeItem(TOKEN_EXP_KEY);\n    storage.removeItem(PROFILE_KEY);\n  },\n  setProfile(profile) {\n    storage.setItem(PROFILE_KEY, JSON.stringify(profile));\n  },\n  getProfile() {\n    const value = storage.getItem(PROFILE_KEY);\n    return value ? JSON.parse(value) : null;\n  },\n};\n", "import { authStore } from './auth/authStore.js';\n\n/** Devuelve en tiempo de ejecuci\u00F3n la URL base que indica el entorno sin ning\u00FAn hardcode. */\nexport const getBaseUrl = (() => {\n  let cached = '';\n  return () => {\n    if (cached !== '') {\n      return cached;\n    }\n    const envBase = window.__ENV?.API_BASE_URL;\n    if (!envBase) {\n      throw new Error('API_BASE_URL no est\u00E1 configurada en window.__ENV');\n    }\n    cached = envBase.endsWith('/') ? envBase.slice(0, -1) : envBase;\n    return cached;\n  };\n})();\n\n/** Construye la URL final agregando la base configurada si la ruta es relativa. */\nconst buildUrl = (path) => (path.startsWith('http') ? path : `${getBaseUrl()}${path}`);\n\n/** Borra el token y redirige al login (forzando la ventana top) si el backend responde con 401. */\nconst handleUnauthorized = () => {\n  authStore.clearToken();\n  const target = '/';\n  if (window.top && window.top !== window) {\n    window.top.location.href = target;\n  } else {\n    window.location.href = target;\n  }\n};\n\n/** Fusiona headers adicionales con el header JSON obligatorio. */\nconst buildHeaders = (extraHeaders) => ({\n  'Content-Type': 'application/json',\n  ...extraHeaders,\n});\n\n/** Extrae el payload JSON o devuelve null si no viene contenido v\u00E1lido. */\nconst parsePayload = async (response) => response.json().catch(() => null);\n\n/**\n * Env\u00EDa una petici\u00F3n HTTP contra la API, gestionando tokens, errores y JSON.\n * @param path Ruta relativa o absoluta del recurso.\n * @param options Configuraci\u00F3n adicional de fetch.\n */\nexport const apiClient = async (path, options = {}) => {\n  const { method = 'GET', body, headers = {}, ...rest } = options;\n  const composedHeaders = buildHeaders(headers);\n  const token = authStore.getToken() ?? localStorage.getItem(\"jwt\");\n\n  if (token) {\n    composedHeaders.Authorization = `Bearer ${token}`;\n  }\n  \n  const response = await fetch(buildUrl(path), {\n    method,\n    credentials: 'include',\n    headers: composedHeaders,\n    body: body === undefined ? undefined : JSON.stringify(body),\n    ...rest,\n  });\n\n  const payload = await parsePayload(response);\n  if (!response.ok) {\n    if (response.status === 401) {\n      handleUnauthorized();\n    }\n    const err = payload?.error ?? {\n      code: `http.${response.status}`,\n      message: response.statusText,\n    };\n    throw { status: response.status, error: err };\n  }\n\n  return payload;\n};\n\n/** Genera un helper para m\u00E9todos que env\u00EDan body JSON. */\nconst withBody = (method) => (path, body) => apiClient(path, { method, body });\n\n/** Genera un helper para m\u00E9todos sin body. */\nconst withoutBody = (method) => (path) => apiClient(path, { method });\n\n/** Env\u00EDa un POST con body serializado. */\nexport const postJson = withBody('POST');\n\n/** Env\u00EDa un PATCH con body serializado. */\nexport const patchJson = withBody('PATCH');\n\n/** Ejecuta una petici\u00F3n DELETE sin body. */\nexport const deleteJson = withoutBody('DELETE');\n\n/** Ejecuta una petici\u00F3n GET sin body. */\nexport const getJson = withoutBody('GET');\n", "import { authStore } from '../auth/authStore.js';\n\nconst toolbarTemplate = `\n  <header class=\"toolbar\">\n    <div class=\"toolbar-logo\">\n      <a href=\"/Frontend/app.php\">\n        <img src=\"/logo/full_logoweb.png\" alt=\"FinHub\" style=\"height: 88px;\" />\n      </a>\n    </div>\n  <nav class=\"toolbar-menu\">\n      <button type=\"button\" class=\"icon-btn\" data-menu=\"portfolios\" data-link=\"/Frontend/Portafolios.html\" aria-label=\"Portafolios\">\n        <span class=\"circle-icon\">\uD83D\uDC5C</span>\n      </button>\n      <button type=\"button\" class=\"icon-btn\" data-menu=\"heatmap\" data-link=\"/Frontend/heatmap.html\" aria-label=\"Heatmap\">\n        <span class=\"circle-icon\">\uD83C\uDF21\uFE0F</span>\n      </button>\n      <button type=\"button\" class=\"icon-btn\" id=\"stats-menu\" data-menu=\"stats\" data-link=\"/Frontend/estadistica.html\" aria-label=\"Estad\u00EDstica\">\n        <span class=\"circle-icon\">\uD83D\uDCCA</span>\n      </button>\n      <button type=\"button\" class=\"icon-btn\" id=\"signals-menu\" data-menu=\"signals\" data-link=\"/Frontend/trader-consejero.html\" aria-label=\"Trader Consejero\">\n        <span class=\"circle-icon\">\uD83D\uDCB9</span>\n      </button>\n      <button type=\"button\" class=\"icon-btn\" id=\"oracle-menu\" data-menu=\"oracle\" data-link=\"/Frontend/oraculo.html\" aria-label=\"Or\u00E1culo\">\n        <span class=\"circle-icon\">\uD83D\uDD2E</span>\n      </button>\n      <button type=\"button\" class=\"icon-btn\" id=\"radar-menu\" data-menu=\"radar\" data-link=\"/Frontend/radar.html\" aria-label=\"Radar\">\n        <span class=\"circle-icon\">\uD83D\uDCE1</span>\n      </button>\n    </nav>\n    <div class=\"toolbar-user\">\n      <button id=\"user-menu-button\" type=\"button\">\n        <span id=\"user-name\">Usuario</span>\n        <span class=\"chevron\">\u25BE</span>\n      </button>\n    </div>\n    <button class=\"toolbar-toggle\" type=\"button\" aria-expanded=\"true\" aria-label=\"Ocultar barra\" title=\"Ocultar barra\">\u25B2</button>\n  </header>\n  <div class=\"user-dropdown\" id=\"user-dropdown\">\n    <button id=\"admin-users-action\" type=\"button\">Admin Usuarios</button>\n    <button id=\"logout-action\" type=\"button\">Cerrar sesi\u00F3n</button>\n  </div>\n`;\n\nlet toolbarMounted = false;\nconst isAdminProfile = (profile) => String(profile?.role ?? '').toLowerCase() === 'admin';\n\nconst ensureToolbarStyles = () => {\n  if (document.getElementById('toolbar-collapsible-style')) return;\n  const style = document.createElement('style');\n  style.id = 'toolbar-collapsible-style';\n  style.textContent = `\n    #toolbar-root > header.toolbar {\n      padding: 10px 56px 10px 12px;\n      gap: 10px;\n    }\n    .toolbar.has-toggle { position: sticky; top: 0; z-index: 15; padding-bottom: 28px; position: relative; }\n    .toolbar-toggle {\n      position: absolute;\n      right: 12px;\n      bottom: 6px;\n      width: 36px;\n      height: 36px;\n      border-radius: 999px;\n      border: 1px solid rgba(148, 163, 184, 0.45);\n      background: rgba(15, 23, 42, 0.85);\n      color: #e2e8f0;\n      cursor: pointer;\n      display: grid;\n      place-items: center;\n      box-shadow: 0 10px 30px rgba(0,0,0,0.35);\n    }\n    /* Cuando la barra est\u00E1 colapsada, dejamos el bot\u00F3n sobresalir >50% hacia abajo */\n    .toolbar.collapsed .toolbar-toggle {\n      bottom: -20px;\n    }\n    .toolbar-toggle:focus-visible { outline: 2px solid rgba(14, 165, 233, 0.6); outline-offset: 2px; }\n    .toolbar.collapsed .toolbar-menu,\n    .toolbar.collapsed .toolbar-user,\n    .toolbar.collapsed .toolbar-logo { display: none !important; }\n    .toolbar.collapsed { padding-bottom: 16px; }\n    .toolbar-logo img { border: none; outline: none; box-shadow: none; margin: 0; padding: 0; height: 72px; }\n    .toolbar-menu .icon-btn {\n      width: 40px;\n      height: 40px;\n      border-radius: 50%;\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      padding: 0;\n      border: none;\n      box-shadow: none;\n      background: rgba(15, 23, 42, 0.9);\n    }\n    .circle-icon { font-size: 1.1rem; line-height: 1; }\n    .toolbar-menu button,\n    .toolbar-menu select {\n      margin: 0;\n      border: none;\n      box-shadow: none;\n    }\n    @media (max-width: 768px) {\n      .toolbar {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        grid-auto-rows: auto;\n        align-items: center;\n        gap: 6px 10px;\n        padding: 8px 56px 28px 12px;\n      }\n      .toolbar-logo {\n        grid-column: 1 / 2;\n        grid-row: 1;\n        display: flex;\n        align-items: center;\n        margin: 0;\n      }\n      .toolbar-user {\n        grid-column: 2 / 3;\n        grid-row: 1;\n        display: flex;\n        justify-content: flex-end;\n        align-items: center;\n        min-width: 0;\n        margin: 0;\n      }\n      .toolbar-menu {\n        grid-column: 1 / 3;\n        grid-row: 2;\n        width: 100%;\n        display: flex;\n        flex-wrap: wrap;\n        gap: 6px;\n        justify-content: flex-start;\n        margin-top: 4px;\n      }\n      .toolbar-menu button,\n      .toolbar-menu select {\n        padding: 8px 10px;\n        min-width: auto;\n        margin: 0;\n        border: none;\n        box-shadow: none;\n      }\n    }\n  `;\n  document.head.appendChild(style);\n};\n\nexport const setAdminMenuVisibility = (profile) => {\n  const adminButton = document.getElementById('admin-users-action');\n  const signalsButton = document.getElementById('signals-menu');\n  const isAdmin = isAdminProfile(profile);\n  if (adminButton) adminButton.hidden = !isAdmin;\n  if (signalsButton) signalsButton.hidden = false;\n};\n\nexport const renderToolbar = () => {\n  const container = document.getElementById('toolbar-root');\n  if (!container || toolbarMounted) {\n    return;\n  }\n  ensureToolbarStyles();\n  container.innerHTML = toolbarTemplate;\n  toolbarMounted = true;\n  const cachedProfile = authStore.getProfile();\n  setAdminMenuVisibility(cachedProfile);\n};\n\nexport const highlightToolbar = () => {\n  const path = window.location.pathname;\n  document.querySelectorAll('.toolbar-menu button').forEach((button) => {\n    const link = button.getAttribute('data-link');\n    button.classList.toggle('active', link === path);\n  });\n};\n\nconst updateToggleVisual = (toolbar, toggle) => {\n  const collapsed = toolbar.classList.contains('collapsed');\n  toggle.textContent = collapsed ? '\u25BC' : '\u25B2';\n  toggle.setAttribute('aria-expanded', String(!collapsed));\n  toggle.setAttribute('aria-label', collapsed ? 'Mostrar barra' : 'Ocultar barra');\n  toggle.title = collapsed ? 'Mostrar barra' : 'Ocultar barra';\n};\n\nexport const collapseToolbar = () => {\n  const toolbar = document.querySelector('.toolbar');\n  if (!toolbar) return;\n  toolbar.classList.add('collapsed');\n  const toggle = document.querySelector('.toolbar-toggle');\n  if (toggle) {\n    updateToggleVisual(toolbar, toggle);\n  }\n};\n\nconst bindToolbarToggle = () => {\n  const toolbar = document.querySelector('.toolbar');\n  const toggle = document.querySelector('.toolbar-toggle');\n  if (!toolbar || !toggle) return;\n  toolbar.classList.add('has-toggle');\n  updateToggleVisual(toolbar, toggle);\n  toggle.addEventListener('click', () => {\n    toolbar.classList.toggle('collapsed');\n    updateToggleVisual(toolbar, toggle);\n  });\n};\n\nexport const bindToolbarNavigation = () => {\n  const frame = document.getElementById('app-frame');\n  document.querySelectorAll('.toolbar-menu button').forEach((button) => {\n    button.addEventListener('click', (event) => {\n      const link = button.getAttribute('data-link');\n      if (!link) return;\n      if (frame) {\n        event.preventDefault();\n        if (frame.src !== link) {\n          frame.src = link;\n        }\n        document.querySelectorAll('.toolbar-menu button').forEach((b) => b.classList.remove('active'));\n        button.classList.add('active');\n        return;\n      }\n      event.preventDefault();\n      window.location.href = link;\n    });\n  });\n  bindToolbarToggle();\n};\n\nexport const setToolbarUserName = (name) => {\n  const label = document.getElementById('user-name');\n  if (!label) return;\n  label.textContent = name && name.length ? name : 'Usuario';\n};\n\nexport const bindUserMenu = ({ onLogout, onAdmin, profile } = {}) => {\n  const menuButton = document.getElementById('user-menu-button');\n  const dropdown = document.getElementById('user-dropdown');\n  if (!menuButton || !dropdown) return;\n  setAdminMenuVisibility(profile ?? authStore.getProfile());\n\n  menuButton.addEventListener('click', () => {\n    dropdown.classList.toggle('visible');\n  });\n\n  document.addEventListener('click', (event) => {\n    if (!menuButton.contains(event.target) && !dropdown.contains(event.target)) {\n      dropdown.classList.remove('visible');\n    }\n  });\n\n  const adminButton = document.getElementById('admin-users-action');\n  const logoutButton = document.getElementById('logout-action');\n  adminButton?.addEventListener('click', (event) => {\n    event.preventDefault();\n    dropdown.classList.remove('visible');\n    if (typeof onAdmin === 'function') {\n      onAdmin();\n    }\n  });\n  logoutButton?.addEventListener('click', (event) => {\n    event.preventDefault();\n    dropdown.classList.remove('visible');\n    if (typeof onLogout === 'function') {\n      onLogout();\n    }\n  });\n};\n", "const STYLE_ID = 'app-loading-overlay-style';\n\nconst injectStyles = () => {\n  if (document.getElementById(STYLE_ID)) return;\n  const style = document.createElement('style');\n  style.id = STYLE_ID;\n  style.textContent = `\n    .app-loading-overlay {\n      position: fixed;\n      inset: 0;\n      background: rgba(3, 7, 18, 0.78);\n      backdrop-filter: blur(2px);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 9999;\n      opacity: 0;\n      pointer-events: none;\n      transition: opacity 0.18s ease;\n    }\n    .app-loading-overlay.visible {\n      opacity: 1;\n      pointer-events: all;\n    }\n    .app-loading-spinner {\n      width: 70px;\n      height: 70px;\n      border-radius: 50%;\n      border: 6px solid rgba(148, 163, 184, 0.35);\n      border-top-color: #22d3ee;\n      animation: app-spin 0.9s linear infinite;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);\n    }\n    @keyframes app-spin {\n      to { transform: rotate(360deg); }\n    }\n  `;\n  document.head.appendChild(style);\n};\n\n/** Crea un overlay reutilizable con spinner centrado. */\nexport const createLoadingOverlay = () => {\n  injectStyles();\n  const overlay = document.createElement('div');\n  overlay.className = 'app-loading-overlay';\n\n  const spinner = document.createElement('div');\n  spinner.className = 'app-loading-spinner';\n  overlay.appendChild(spinner);\n\n  const state = { counter: 0 };\n\n  const show = () => {\n    try {\n      state.counter += 1;\n      if (!overlay.isConnected) {\n        document.body.appendChild(overlay);\n      }\n      overlay.classList.add('visible');\n    } catch (error) {\n      console.info('[loadingOverlay] No se pudo mostrar overlay', error);\n    }\n  };\n\n  const hide = () => {\n    try {\n      state.counter = Math.max(0, state.counter - 1);\n      if (state.counter === 0) {\n        overlay.classList.remove('visible');\n      }\n    } catch (error) {\n      console.info('[loadingOverlay] No se pudo ocultar overlay', error);\n    }\n  };\n\n  const withLoader = async (fn) => {\n    show();\n    try {\n      return await fn();\n    } catch (error) {\n      console.info('[loadingOverlay] Error durante operaci\u00F3n envuelta', error);\n      throw error;\n    } finally {\n      hide();\n    }\n  };\n\n  return { show, hide, withLoader };\n};\n", "import { getJson } from '../apicliente.js';\nimport { authStore } from '../auth/authStore.js';\nimport { bindToolbarNavigation, bindUserMenu, highlightToolbar, renderToolbar, setAdminMenuVisibility, setToolbarUserName } from '../components/toolbar.js';\nimport { createLoadingOverlay } from '../components/loadingOverlay.js';\n\nconst overlay = createLoadingOverlay();\nconst state = {\n  data: null,\n  currency: 'ARS',\n};\n\nconst setError = (msg) => {\n  const el = document.getElementById('heatmap-error');\n  if (el) el.textContent = msg || '';\n};\n\nconst colorForChange = (pct) => {\n  const clamped = Math.max(-5, Math.min(5, Number.isFinite(pct) ? pct : 0));\n  const norm = (clamped + 5) / 10; // 0..1\n  const r = clamped < 0 ? 239 : Math.round(15 + (34 - 15) * norm);\n  const g = clamped < 0 ? 68 : Math.round(23 + (197 - 23) * norm);\n  const b = clamped < 0 ? 68 : Math.round(42 + (94 - 42) * norm);\n  return `rgb(${r},${g},${b})`;\n};\n\nconst formatNumber = (value, digits = 2) => {\n  if (!Number.isFinite(Number(value))) return '\u2014';\n  return new Intl.NumberFormat('es-AR', { minimumFractionDigits: digits, maximumFractionDigits: digits }).format(Number(value));\n};\n\nconst formatPercent = (value) => {\n  if (!Number.isFinite(Number(value))) return '\u2014';\n  return `${Number(value) >= 0 ? '+' : ''}${formatNumber(value, 2)}%`;\n};\n\nconst renderGrid = () => {\n  const grid = document.getElementById('heatmap-grid');\n  const meta = document.getElementById('heatmap-meta');\n  if (!grid || !state.data) {\n    console.info('[heatmap] sin grid o sin datos a\u00FAn');\n    return;\n  }\n  const groups = Array.isArray(state.data.groups) ? state.data.groups : [];\n  if (groups.length === 0) {\n    console.warn('[heatmap] groups vac\u00EDo', state.data);\n    grid.innerHTML = '<p class=\"muted\">Sin datos para el heatmap.</p>';\n    if (meta) meta.textContent = 'Sin datos';\n    return;\n  }\n  try {\n    console.table(groups.map((g) => ({\n      sector: g.sector,\n      industry: g.industry,\n      items: (g.items ?? []).length,\n    })));\n  } catch {}\n  const items = groups.flatMap((g) => (g.items ?? []).map((i) => ({\n    ...i,\n    sector: g.sector,\n    industry: g.industry,\n  })));\n  try {\n    console.table(items.map((i) => ({\n      symbol: i.symbol,\n      mv: i.market_value,\n      change: i.change_pct_d,\n      sector: i.sector,\n      industry: i.industry,\n    })));\n  } catch {}\n  const maxWeight = Math.max(...items.map((i) => Number(i.market_value) || 0), 0.0001);\n  const tiles = items.map((i) => {\n    const weight = Number(i.market_value) || 0;\n    const size = Math.max(1.5, Math.sqrt(weight / maxWeight) * 4); // factor de escala suave\n    const change = Number(i.change_pct_d);\n    const bg = colorForChange(change);\n    return `\n      <div class=\"tile\" style=\"background:${bg};flex:${size} 1 ${Math.round(120 * size)}px;\">\n        <div style=\"display:flex;justify-content:space-between;gap:6px;\">\n          <strong>${i.symbol}</strong>\n          <small>${formatPercent(change)}</small>\n        </div>\n        <small class=\"muted\">${i.sector ?? 'Sin sector'} \u00B7 ${i.industry ?? 'Sin industry'}</small><br />\n        <div class=\"weight\">Valor: ${formatNumber(i.market_value, 2)} ${state.data.base_currency}</div>\n      </div>\n    `;\n  }).join('');\n  grid.innerHTML = tiles;\n  if (meta) meta.textContent = `Cuenta: ${state.data.account_id ?? '--'} \u00B7 Base: ${state.data.base_currency ?? '--'} \u00B7 As of: ${state.data.as_of ?? '--'}`;\n};\n\nconst loadHeatmap = async () => {\n  setError('');\n  try {\n    console.info('[heatmap] solicitando /portfolio/heatmap');\n    const resp = await overlay.withLoader(() => getJson('/portfolio/heatmap'));\n    console.info('[heatmap] respuesta', resp);\n    state.data = resp;\n    renderGrid();\n    // Debug: tambi\u00E9n ver instrumentos y summary para cruzar datos\n    try {\n      const instruments = await getJson('/portfolio/instruments');\n      console.table((instruments?.data ?? []).map((i) => ({\n        symbol: i.symbol,\n        name: i.name,\n        currency: i.currency,\n      })));\n    } catch (err) {\n      console.info('[heatmap] no se pudo obtener /portfolio/instruments', err);\n    }\n    try {\n      const summary = await getJson('/portfolio/summary');\n      console.table((summary?.data ?? []).map((s) => ({\n        symbol: s.symbol,\n        price: s.price,\n        prev_close: s.previous_close,\n        currency: s.currency,\n      })));\n    } catch (err) {\n      console.info('[heatmap] no se pudo obtener /portfolio/summary', err);\n    }\n  } catch (error) {\n    console.error('[heatmap] load error', error);\n    setError(error?.error?.message ?? 'No se pudo cargar el heatmap');\n  }\n};\n\nconst bindUi = () => {\n  document.getElementById('heatmap-reload')?.addEventListener('click', loadHeatmap);\n  document.getElementById('heatmap-currency')?.addEventListener('change', async (event) => {\n    state.currency = (event.target?.value || 'ARS').toUpperCase();\n    await loadHeatmap();\n  });\n};\n\nconst init = async () => {\n  renderToolbar();\n  bindToolbarNavigation();\n  setToolbarUserName('');\n  bindUserMenu({\n    onLogout: async () => {\n      try { await getJson('/auth/logout'); } finally { authStore.clearToken(); window.location.href = '/'; }\n    },\n    onAdmin: () => window.location.href = '/Frontend/usuarios.html',\n  });\n  highlightToolbar();\n  try {\n    const profile = await getJson('/me');\n    setToolbarUserName(profile?.email ?? '');\n    setAdminMenuVisibility(profile);\n  } catch {\n    const cachedProfile = authStore.getProfile();\n    setToolbarUserName(cachedProfile?.email ?? '');\n    setAdminMenuVisibility(cachedProfile);\n  }\n  await loadHeatmap();\n  bindUi();\n};\n\ndocument.addEventListener('DOMContentLoaded', init);\n"],
  "mappings": "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",
  "names": ["overlay", "state"]
}
